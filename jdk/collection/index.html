<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java é›†åˆ | KeepJava</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Java é›†åˆ">
    <meta name="keywords" content="Java é›†åˆ">
    <link rel="preload" href="/KeepJava/assets/css/0.styles.0321c629.css" as="style"><link rel="preload" href="/KeepJava/assets/js/app.95e4ac80.js" as="script"><link rel="preload" href="/KeepJava/assets/js/2.73d6ef14.js" as="script"><link rel="preload" href="/KeepJava/assets/js/17.8a8fe6dc.js" as="script"><link rel="preload" href="/KeepJava/assets/js/3.596aa5f2.js" as="script"><link rel="prefetch" href="/KeepJava/assets/js/10.f77a3b1c.js"><link rel="prefetch" href="/KeepJava/assets/js/11.f2c39f13.js"><link rel="prefetch" href="/KeepJava/assets/js/12.7295ba16.js"><link rel="prefetch" href="/KeepJava/assets/js/13.cc733961.js"><link rel="prefetch" href="/KeepJava/assets/js/14.c0a99400.js"><link rel="prefetch" href="/KeepJava/assets/js/15.e38b5c52.js"><link rel="prefetch" href="/KeepJava/assets/js/16.8118b0f3.js"><link rel="prefetch" href="/KeepJava/assets/js/18.6432444b.js"><link rel="prefetch" href="/KeepJava/assets/js/19.a3be88a3.js"><link rel="prefetch" href="/KeepJava/assets/js/20.c5e50ea4.js"><link rel="prefetch" href="/KeepJava/assets/js/21.964f1dfe.js"><link rel="prefetch" href="/KeepJava/assets/js/22.0dcbf95f.js"><link rel="prefetch" href="/KeepJava/assets/js/23.ced2e82f.js"><link rel="prefetch" href="/KeepJava/assets/js/24.6351a6c5.js"><link rel="prefetch" href="/KeepJava/assets/js/25.3cc78923.js"><link rel="prefetch" href="/KeepJava/assets/js/26.87ab7653.js"><link rel="prefetch" href="/KeepJava/assets/js/27.ebe07d00.js"><link rel="prefetch" href="/KeepJava/assets/js/28.e32b4030.js"><link rel="prefetch" href="/KeepJava/assets/js/29.a39dc7ab.js"><link rel="prefetch" href="/KeepJava/assets/js/30.a7ef1e11.js"><link rel="prefetch" href="/KeepJava/assets/js/31.386e222b.js"><link rel="prefetch" href="/KeepJava/assets/js/32.85324444.js"><link rel="prefetch" href="/KeepJava/assets/js/33.1775ff36.js"><link rel="prefetch" href="/KeepJava/assets/js/34.e9f2b7c9.js"><link rel="prefetch" href="/KeepJava/assets/js/35.4b7e161f.js"><link rel="prefetch" href="/KeepJava/assets/js/36.39e8eff2.js"><link rel="prefetch" href="/KeepJava/assets/js/37.90259285.js"><link rel="prefetch" href="/KeepJava/assets/js/38.d838dba8.js"><link rel="prefetch" href="/KeepJava/assets/js/39.aab402f0.js"><link rel="prefetch" href="/KeepJava/assets/js/4.a6f55f5d.js"><link rel="prefetch" href="/KeepJava/assets/js/40.1e1951fb.js"><link rel="prefetch" href="/KeepJava/assets/js/41.b994974d.js"><link rel="prefetch" href="/KeepJava/assets/js/42.77236de4.js"><link rel="prefetch" href="/KeepJava/assets/js/43.f1cd7a56.js"><link rel="prefetch" href="/KeepJava/assets/js/44.b9cf68c3.js"><link rel="prefetch" href="/KeepJava/assets/js/45.d949d581.js"><link rel="prefetch" href="/KeepJava/assets/js/46.3306095e.js"><link rel="prefetch" href="/KeepJava/assets/js/47.1c08e86c.js"><link rel="prefetch" href="/KeepJava/assets/js/48.8c0802c7.js"><link rel="prefetch" href="/KeepJava/assets/js/49.b513c38f.js"><link rel="prefetch" href="/KeepJava/assets/js/5.be33ac2d.js"><link rel="prefetch" href="/KeepJava/assets/js/50.a91e4a91.js"><link rel="prefetch" href="/KeepJava/assets/js/51.94807067.js"><link rel="prefetch" href="/KeepJava/assets/js/52.55860f57.js"><link rel="prefetch" href="/KeepJava/assets/js/53.65662d2d.js"><link rel="prefetch" href="/KeepJava/assets/js/6.c9a4e2e1.js"><link rel="prefetch" href="/KeepJava/assets/js/7.6d22e957.js"><link rel="prefetch" href="/KeepJava/assets/js/8.4b0668c3.js"><link rel="prefetch" href="/KeepJava/assets/js/9.c098ded9.js">
    <link rel="stylesheet" href="/KeepJava/assets/css/0.styles.0321c629.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/KeepJava/" class="home-link router-link-active"><img src="/KeepJava/assets/logo/java.svg" alt="KeepJava" class="logo"> <span class="site-name can-hide">KeepJava</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/KeepJava/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java SE" class="dropdown-title"><span class="title">Java SE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java SE" class="mobile-dropdown-title"><span class="title">Java SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/introduction/" class="nav-link">
  Java è¯­è¨€åŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/version/" class="nav-link">
  Java å‘å±•ç®€å²
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/object/" class="nav-link">
  é¢å‘å¯¹è±¡ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/reflection/" class="nav-link">
  Java åå°„
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/annotation/" class="nav-link">
  Java æ³¨è§£
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/exceptions/" class="nav-link">
  Java å¼‚å¸¸
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/generics/" class="nav-link">
  Java æ³›å‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/collection/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java é›†åˆ
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/io/" class="nav-link">
  Java IO
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/concurrency/" class="nav-link">
  Java å¹¶å‘ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/skill/" class="nav-link">
  Java é¢å¤–æŠ€èƒ½
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java EE" class="dropdown-title"><span class="title">Java EE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java EE" class="mobile-dropdown-title"><span class="title">Java EE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring Boot
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring MVC
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          éå…³ç³»å‹ (NoSQL)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/db/mongo/" class="nav-link">
  MongoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  åˆ†å¸ƒå¼
</a></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  ä¸­é—´ä»¶
</a></div><div class="nav-item"><a href="/KeepJava/solution/" class="nav-link">
  è§£å†³æ–¹æ¡ˆ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="mobile-dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/idea/patterns/" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><a href="/KeepJava/tools/" class="nav-link">
  å·¥å…·|æŠ€èƒ½
</a></div> <a href="https://github.com/pycrab" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/KeepJava/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java SE" class="dropdown-title"><span class="title">Java SE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java SE" class="mobile-dropdown-title"><span class="title">Java SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/introduction/" class="nav-link">
  Java è¯­è¨€åŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/version/" class="nav-link">
  Java å‘å±•ç®€å²
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/object/" class="nav-link">
  é¢å‘å¯¹è±¡ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/reflection/" class="nav-link">
  Java åå°„
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/annotation/" class="nav-link">
  Java æ³¨è§£
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/exceptions/" class="nav-link">
  Java å¼‚å¸¸
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/generics/" class="nav-link">
  Java æ³›å‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/collection/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java é›†åˆ
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/io/" class="nav-link">
  Java IO
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/concurrency/" class="nav-link">
  Java å¹¶å‘ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/skill/" class="nav-link">
  Java é¢å¤–æŠ€èƒ½
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java EE" class="dropdown-title"><span class="title">Java EE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java EE" class="mobile-dropdown-title"><span class="title">Java EE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring Boot
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring MVC
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          éå…³ç³»å‹ (NoSQL)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/db/mongo/" class="nav-link">
  MongoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  åˆ†å¸ƒå¼
</a></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  ä¸­é—´ä»¶
</a></div><div class="nav-item"><a href="/KeepJava/solution/" class="nav-link">
  è§£å†³æ–¹æ¡ˆ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="mobile-dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/idea/patterns/" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><a href="/KeepJava/tools/" class="nav-link">
  å·¥å…·|æŠ€èƒ½
</a></div> <a href="https://github.com/pycrab" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java é›†åˆ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/KeepJava/jdk/collection/#collection" class="sidebar-link">Collection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#list-jdk-1-2" class="sidebar-link">List</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#arraylist" class="sidebar-link" style="padding-left:3rem;">ArrayList</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#vector" class="sidebar-link" style="padding-left:3rem;">Vector</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#stack" class="sidebar-link" style="padding-left:3rem;">Stack</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#linkedlist" class="sidebar-link" style="padding-left:3rem;">LinkedList</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#set-jdk-1-2" class="sidebar-link">Set</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#hashset" class="sidebar-link" style="padding-left:3rem;">HashSet</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#linkedhashset" class="sidebar-link" style="padding-left:3rem;">LinkedHashSet</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#treeset" class="sidebar-link" style="padding-left:3rem;">TreeSet</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#enumset-jdk-5" class="sidebar-link" style="padding-left:3rem;">EnumSet</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#queue-jdk-5" class="sidebar-link">Queue</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#priorityqueue" class="sidebar-link" style="padding-left:3rem;">PriorityQueue</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#deque-jdk-6" class="sidebar-link">Deque</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#arraydeque" class="sidebar-link" style="padding-left:3rem;">ArrayDeque</a></li></ul></li><li><a href="/KeepJava/jdk/collection/#map" class="sidebar-link">Map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#hashmap" class="sidebar-link" style="padding-left:3rem;">HashMap</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#linkedhashmap" class="sidebar-link" style="padding-left:3rem;">LinkedHashMap</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#treemap" class="sidebar-link" style="padding-left:3rem;">TreeMap</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#enummap" class="sidebar-link" style="padding-left:3rem;">EnumMap</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#weakhashmap" class="sidebar-link" style="padding-left:3rem;">WeakHashMap</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#identityhashmap" class="sidebar-link" style="padding-left:3rem;">IdentityHashMap</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#hashtable" class="sidebar-link" style="padding-left:3rem;">Hashtable</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#properties" class="sidebar-link" style="padding-left:3rem;">Properties</a></li></ul></li><li><a href="/KeepJava/jdk/collection/#fail-fast-æœºåˆ¶" class="sidebar-link">fail - fast æœºåˆ¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/KeepJava/jdk/collection/#collections-ç±»" class="sidebar-link">Collections ç±»</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/KeepJava/jdk/collection/#å¹¶å‘å®‰å…¨" class="sidebar-link">å¹¶å‘å®‰å…¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#copyonwritearraylist" class="sidebar-link">CopyOnWriteArrayList</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#copyonwritearrayset" class="sidebar-link">CopyOnWriteArraySet</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#concurrenthashmap" class="sidebar-link">ConcurrentHashMap</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/collection/#concurrentskiplistmap-jdk-6" class="sidebar-link">ConcurrentSkipListMap</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block tip"><p class="custom-block-title">å¤ä¹ ä¸‹ æ•°ç»„</p> <p>Java æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„ç›¸åŒç±»å‹çš„å…ƒç´ çš„åˆ—è¡¨ï¼Œæ•°ç»„ä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œé€šè¿‡ä¸‹æ ‡éšæœºè®¿é—®æ•°ç»„å…ƒç´ ã€‚<strong>æ•°ç»„åˆå§‹åŒ–åä¸èƒ½æ”¹å˜å¤§å°</strong>ï¼Œåˆå§‹åŒ–æ•°ç»„ï¼ˆåˆ†é…å†…å­˜ç©ºé—´ï¼Œåˆå§‹åŒ–é»˜è®¤å€¼ï¼‰çš„æ–¹å¼å¦‚ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// é™æ€åˆå§‹åŒ–</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array0 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// åŠ¨æ€åˆå§‹åŒ–</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
array2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
array2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
array2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">// æ•°ç»„éå†</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>array2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¢å¼º for- each å¾ªç¯</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> array2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>java.util.Arrays ç±»æä¾›äº†æ•°ç»„æ’åºã€æŸ¥æ‰¾ã€æ‹·è´ç­‰æ–¹æ³•ï¼Œè¿˜æä¾›äº†æ•°ç»„è½¬ä¸ºé›†åˆçš„æ–¹æ³•ã€‚æ•°ç»„äº”ç§æ‹·è´æ–¹å¼ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> y <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// for å¾ªç¯</span>
<span class="token comment">// y = x.clone();</span>
<span class="token comment">// System.arraycopy(x, 0, y, 0, 5);</span>
<span class="token comment">// y = Arrays.copyOf(x, 5);</span>
<span class="token comment">// y = Arrays.copyOfRange(x, 0, 5);</span>

<span class="token comment">// ä»¥ä¸Šæ–¹æ³•ä¸€ç»´æ•°ç»„å¯¹åŸºæœ¬ç±»å‹æ˜¯æ·±æ‹·è´ï¼Œå¯¹å¼•ç”¨ç±»å‹æ˜¯æµ…æ‹·è´</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æ•°ç»„æ‹·è´æœ€å¿«çš„æ–¹å¼åº”è¯¥å°±æ˜¯ <code>System.arraycopy()</code> æ–¹æ³•äº†ï¼Œå®ƒç”± JVM ä¸“é—¨å®ç°åŸºäºå†…å­˜çš„æ‹·è´ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@HotSpotIntrinsicCandidate</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">arraycopy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> src<span class="token punctuation">,</span>  <span class="token keyword">int</span>  srcPos<span class="token punctuation">,</span> <span class="token class-name">Object</span> dest<span class="token punctuation">,</span> <span class="token keyword">int</span> destPos<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <h2 id="collection"><a href="#collection" class="header-anchor">ğŸ‹</a> Collection</h2> <p><img src="https://pycrab.github.io/KeepJava/assets/media/jdk-collections-collection.png" alt="Collection ç±»å›¾.png"></p> <p>Collection æ¥å£æä¾›çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p> <ul><li>è·å–å…ƒç´ ä¸ªæ•° <code>size()</code>ã€è½¬ä¸ºæ•°ç»„ <code>toArray(T[] a)</code></li> <li>æœ«å°¾æ·»åŠ  <code>add(E e)</code> ã€åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´  <code>remove(Object o)</code>ã€æ¸…ç©º <code>clear()</code></li> <li>æ˜¯å¦æ²¡æœ‰å…ƒç´  <code>isEmpty()</code>ã€æ˜¯å¦åŒ…å« <code>contains(Object o)</code>ã€æ˜¯å¦åŒ…å«å…¨éƒ¨  <code>containsAll(Collection&lt;?&gt; c)</code></li> <li>å¹¶é›† <code>addAll(Collection&lt;? extends E&gt; c)</code>ã€äº¤é›† <code>retainAll(Collection&lt;?&gt; c)</code>ã€å·®é›† <code>removeAll(Collection&lt;?&gt; c)</code></li></ul> <h3 id="list-jdk-1-2"><a href="#list-jdk-1-2" class="header-anchor">ğŸ‹</a> List <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 1.2</span></h3> <p>List æ˜¯æœ‰åºã€å¯é‡å¤å…ƒç´ ï¼ˆé€šå¸¸å¯ä»¥ä¸º nullï¼‰çš„åˆ—è¡¨ã€‚List æä¾›äº†ä»¥ä¸‹åŸºæœ¬æ–¹æ³•ï¼š</p> <ul><li>è·å– <code>get(int index)</code>ã€ä¿®æ”¹ <code>set(int index, E element)</code></li> <li>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä¸‹æ ‡ <code>indexOf(Object o)</code>ã€æŸ¥æ‰¾æœ€åä¸€ä¸ªåŒ¹é…çš„ä¸‹æ ‡ <code>lastIndexOf(Object o)</code></li> <li>æˆªå– <code>subList(int fromIndex, int toIndex)</code></li> <li>æ’åº <code>sort(Comparator&lt;? super E&gt; c</code>ã€è¿­ä»£å™¨éå† <code>listIterator(int index)</code></li> <li>åˆ›å»ºä¸å¯å˜åˆ—è¡¨ <code>of(E e1)</code><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 9</span>ã€å¤åˆ¶ä¸èƒ½ä¸º null çš„å…ƒç´ çš„ä¸å¯å˜åˆ—è¡¨ <code>copyOf(Collection&lt;? extends E&gt; coll)</code><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 10</span></li></ul> <h4 id="arraylist"><a href="#arraylist" class="header-anchor">ğŸ‹</a> ArrayList</h4> <p>åŸºäºæ•°ç»„çš„å¯åŠ¨æ€æ‰©å®¹çš„åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•éšæœºè®¿é—®å…ƒç´ ã€‚</p> <p>ArrayList çš„ <code>size()</code>ã€<code>isEmpty()</code>ã€<code>get(int index)</code>ã€<code>set(int index, E element)</code>ã€<code>iterator()</code> æ–¹æ³•ä»¥å›ºå®šæ—¶é—´è¿è¡Œï¼›é€šè¿‡ add æ–¹æ³•æ’å…¥ n ä¸ªå…ƒç´ ä»¥ O(n) å›ºå®šæ—¶é—´è¿è¡Œï¼›å…¶å®ƒå¤§éƒ¨åˆ†æ“ä½œä»¥çº¿æ€§æ—¶é—´è¿è¡Œã€‚</p> <details class="custom-block details"><summary>ArrayList æºç æµ…æï¼ˆJDK 15ï¼‰</summary> <p><strong>ArrayList åº•å±‚ç»“æ„</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ArrayList åŸºäºæ•°ç»„ elementData å®ç°ï¼Œé€šè¿‡ size æ¥è®°å½•å…ƒç´ ä¸ªæ•°</span>
<span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token comment">// è¿˜å¯ä»¥çœ‹åˆ°å­˜å‚¨çš„å¯¹è±¡éƒ½æ˜¯ Object ç±»å‹ï¼Œå®ƒä½¿ç”¨çš„æ˜¯æ³›å‹çº¦æŸ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>æ•°ç»„åˆå§‹åŒ–æ–¹æ³•æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ„é€ å™¨</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> EMPTY_ELEMENTDATA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal Capacity: &quot;</span> <span class="token operator">+</span> initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            elementData <span class="token operator">=</span> a<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        elementData <span class="token operator">=</span> EMPTY_ELEMENTDATA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>ä»¥ä¸Šæ–¹æ³•ä¸­å¯çœ‹åˆ°ï¼Œåˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œå¦‚æœç»™å®šçš„å®¹é‡ä¸ä¸º 0ï¼Œåˆ™ç›´æ¥åˆ†é…æŒ‡å®šå¤§å°çš„å®¹é‡åˆ›å»ºæ•°ç»„ elementDataï¼›å¦‚æœä¸º 0ï¼Œåˆ™åˆå§‹åŒ–ä¸ºé»˜è®¤çš„ç©ºæ•°ç»„ã€‚</p> <p><strong>æ•°ç»„æ–°å¢å…ƒç´ æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ·»åŠ å…ƒç´ </span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">,</span> <span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        elementData <span class="token operator">=</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
    size <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> s<span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">=</span> size<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span>elementData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        elementData <span class="token operator">=</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                     elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
                     s <span class="token operator">-</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
    size <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numNew <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> s<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numNew <span class="token operator">&gt;</span> <span class="token punctuation">(</span>elementData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> size<span class="token punctuation">)</span><span class="token punctuation">)</span>
        elementData <span class="token operator">=</span> <span class="token function">grow</span><span class="token punctuation">(</span>s <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> s<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
    size <span class="token operator">=</span> s <span class="token operator">+</span> numNew<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numNew <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> s<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numNew <span class="token operator">&gt;</span> <span class="token punctuation">(</span>elementData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> size<span class="token punctuation">)</span><span class="token punctuation">)</span>
        elementData <span class="token operator">=</span> <span class="token function">grow</span><span class="token punctuation">(</span>s <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> numMoved <span class="token operator">=</span> s <span class="token operator">-</span> index<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                         elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> numNew<span class="token punctuation">,</span>
                         numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
    size <span class="token operator">=</span> s <span class="token operator">+</span> numNew<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>æ–°å¢å…ƒç´ æ—¶ï¼Œå¦‚æœæ–°å¢çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡å½“å‰å‰©ä½™å®¹é‡ï¼Œåˆ™è°ƒç”¨ <code>grow()</code> æˆ–è€… <code>grow(int)</code> æ–¹æ³•å…ˆæ‰©å®¹ï¼›ç„¶åé€šè¿‡ <code>System.arraycopy()</code> æ–¹æ³•æ’å…¥å…ƒç´ ã€‚æˆ‘ä»¬çœ‹ä¸‹ grow æ–¹æ³•çš„é€»è¾‘ï¼š</p> <p><strong>grow è‡ªåŠ¨æ‰©å®¹æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä¸¤ä¸ªç©ºæ•°ç»„ï¼Œç”¨äºæ ‡è¯†ç¬¬ä¸€æ¬¡åº”è¯¥åˆ†é…å¤šå¤§å®¹é‡</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> EMPTY_ELEMENTDATA <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–åˆ—è¡¨æ—¶ç»™å®šçš„å®¹é‡ä¸º 0</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–åˆ—è¡¨æ—¶æ²¡æœ‰æŒ‡å®šå®¹é‡</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_CAPACITY <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// é»˜è®¤æ‰©å……å®¹é‡</span>

<span class="token comment">// å…·ä½“æ‰©å®¹æ–¹æ³•</span>
<span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">grow</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å‚æ•°ä¸ºæ•°ç»„ç›®æ ‡å¤§å°</span>
<span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// å¦‚æœæ˜¯ä¸€ä¸ªæŒ‡å®šä¸º 0 å®¹é‡çš„åˆå§‹åŒ–åˆ—è¡¨æˆ–è€…åˆ—è¡¨ä¸­å·²æœ‰å…ƒç´ ï¼Œåˆ™è°ƒç”¨ ArraysSupport.newLength æ–¹æ³•æ‰©å……å®¹é‡ï¼Œç„¶ååº•å±‚è°ƒç”¨ System.arraycopy() æ–¹æ³•å¤åˆ¶å·²æœ‰çš„å…ƒç´ </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">||</span> elementData <span class="token operator">!=</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> <span class="token class-name">ArraysSupport</span><span class="token punctuation">.</span><span class="token function">newLength</span><span class="token punctuation">(</span>oldCapacity<span class="token punctuation">,</span>
                                                  minCapacity <span class="token operator">-</span> oldCapacity<span class="token punctuation">,</span> <span class="token comment">/* minimum growth */</span>
                                                  oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span>           <span class="token comment">/* preferred growth */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœæ˜¯ä¸€ä¸ªæ²¡æœ‰æŒ‡å®šå®¹é‡çš„åˆå§‹åŒ–åˆ—è¡¨ï¼Œåˆ™ç›´æ¥åˆ†é…ä¸€ä¸ª Math.max(DEFAULT_CAPACITY, minCapacity) å¤§å°çš„æ•°ç»„è¿”å›</span>
        <span class="token keyword">return</span> elementData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>DEFAULT_CAPACITY<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>æ‰‹åŠ¨æ‰©å®¹æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ‰‹åŠ¨æ‰©å®¹æ–¹æ³•</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯ä»¥çœ‹åˆ°è°ƒç”¨æ­¤æ–¹æ³•ç¬¦åˆæ¡ä»¶æ‰ä¼šæ‰©å®¹ï¼Œéœ€è¦æ»¡è¶³è¦å¢åŠ çš„å®¹é‡è¦è¶…è¿‡å½“å‰æ•°ç»„çš„å¤§å°å¹¶ä¸”ä¸èƒ½è¶…è¿‡ Integer.MAX_VALUE - 8ï¼Œå¹¶ä¸”ä¸èƒ½æ˜¯æ— å‚æ„é€ åˆšåˆå§‹åŒ–å¥½çš„åˆ—è¡¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> elementData<span class="token punctuation">.</span>length
        <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>elementData <span class="token operator">==</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA
             <span class="token operator">&amp;&amp;</span> minCapacity <span class="token operator">&lt;=</span> DEFAULT_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è°ƒæ•´å®¹é‡åˆ°å…ƒç´ ä¸ªæ•°ï¼Œå‡å°‘ç©ºé—´ä½¿ç”¨</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">trimToSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&lt;</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        elementData <span class="token operator">=</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> EMPTY_ELEMENTDATA
            <span class="token operator">:</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>ArraysSupport.newLength å…·ä½“æ‰©å®¹å¤§å°æºç </strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ‰©å®¹å‚æ•°ä¸ºï¼šå½“å‰æ•°ç»„å¤§å°ã€éœ€è¦å¤§å°ã€å½“å‰çš„ä¸€åŠï¼ˆå³ç§»ä¸€ä½ç›¸å½“äºæ•´é™¤ï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">newLength</span><span class="token punctuation">(</span><span class="token keyword">int</span> oldLength<span class="token punctuation">,</span> <span class="token keyword">int</span> minGrowth<span class="token punctuation">,</span> <span class="token keyword">int</span> prefGrowth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert oldLength &gt;= 0</span>
    <span class="token comment">// assert minGrowth &gt; 0</span>

    <span class="token keyword">int</span> newLength <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>minGrowth<span class="token punctuation">,</span> prefGrowth<span class="token punctuation">)</span> <span class="token operator">+</span> oldLength<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newLength <span class="token operator">-</span> MAX_ARRAY_LENGTH <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> newLength<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">hugeLength</span><span class="token punctuation">(</span>oldLength<span class="token punctuation">,</span> minGrowth<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hugeLength</span><span class="token punctuation">(</span><span class="token keyword">int</span> oldLength<span class="token punctuation">,</span> <span class="token keyword">int</span> minGrowth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> minLength <span class="token operator">=</span> oldLength <span class="token operator">+</span> minGrowth<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>minLength <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// overflow</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OutOfMemoryError</span><span class="token punctuation">(</span><span class="token string">&quot;Required array length too large&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>minLength <span class="token operator">&lt;=</span> MAX_ARRAY_LENGTH<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> MAX_ARRAY_LENGTH<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>é€šè¿‡ grow æ–¹æ³•å¯ä»¥çŸ¥é“äº†ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ²¡æœ‰æŒ‡å®šå®¹é‡çš„åˆå§‹åŒ–åˆ—è¡¨ï¼Œæ ¹æ®æ–°å…ƒç´ ä¸ªæ•°å’Œ 10 çš„æœ€å¤§å€¼è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼›</p> <p>å¦‚æœæ˜¯ä¸€ä¸ªæŒ‡å®šä¸º 0 å®¹é‡çš„åˆå§‹åŒ–åˆ—è¡¨æˆ–è€…åˆ—è¡¨ä¸­å·²æœ‰å…ƒç´ ï¼Œåˆ™è¿›è¡Œæ‰©å……ï¼Œå¦‚æœæ–°å¢çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡äº†å½“å‰æ•°ç»„å¤§å°çš„ä¸€åŠï¼Œåˆ™å°è¯•ç›´æ¥æ‰©å……ä¸ºç›®æ ‡å¤§å°ï¼›å¦åˆ™å°è¯•æ‰©å……ä¸ºå½“å‰æ•°ç»„å¤§å°çš„ 1.5 å€ã€‚å¦‚æœè¶…å‡º <code>Integer.MAX_VALUE - 8</code>ï¼Œåˆ™å†æ¬¡å°è¯•åˆ†é…ï¼Œå¦‚æœæ–°å¢å…ƒç´ çš„ä¸ªæ•°åœ¨å†…å­˜èŒƒå›´å†…ï¼Œå°äº <code>Integer.MAX_VALUE - 8</code> åˆ™ç›´æ¥æ‰©å……ä¸º <code>Integer.MAX_VALUE - 8</code>ï¼Œå¦åˆ™æ‰©å……ä¸º <code>Integer.MAX_VALUE</code>ã€‚<code>Integer.MAX_VALUE - 8</code> æ˜¯å› ä¸ºæœ‰äº›è™šæ‹Ÿæœºè¦åœ¨æ•°ç»„ä¸­ä¿ç•™æ ‡é¢˜å­—ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">æ€»ç»“</p> <ul><li>åˆå§‹åŒ–æ—¶ç›´æ¥æ ¹æ®å…ƒç´ ä¸ªæ•°å¤§å°åˆ†é…æ•°ç»„</li> <li>æ–°å¢å…ƒç´ ï¼Œä¸å¤Ÿç”¨æ—¶æ‰æ‰©å®¹ï¼Œæ‰©å®¹æ ¹æ®åˆå§‹åŒ–æ–¹å¼æœ‰æ‰€ä¸åŒï¼š
<ul><li>å¦‚æœæ˜¯æ²¡åˆå§‹åŒ–å®¹é‡çš„ç©ºåˆ—è¡¨ï¼Œæ‰©å……ä¸º 10 ï¼Œç›®æ ‡å¤§å°è¶…è¿‡ 10 åˆ™æ‰©å……ä¸ºç›®æ ‡å¤§å°</li> <li>å¦åˆ™æ‰©å……ä¸ºå½“å‰æ•°ç»„å¤§å°çš„ 1.5 å€ï¼Œç›®æ ‡å¤§å°è¶…è¿‡ 1.5 å€åˆ™æ‰©å……ä¸ºç›®æ ‡å¤§å°</li></ul></li></ul></div></details> <h4 id="vector"><a href="#vector" class="header-anchor">ğŸ‹</a> Vector</h4> <p>å’Œ ArrayList å‡ ä¹ä¸€æ ·ï¼Œåªä¸è¿‡ Vector æ˜¯åŒæ­¥çš„ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p> <h4 id="stack"><a href="#stack" class="header-anchor">ğŸ‹</a> Stack</h4> <p>ç»§æ‰¿è‡ª Vectorï¼Œæä¾›å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„ç®€å•çš„æ ˆã€‚å®˜æ–¹æ¨èä½¿ç”¨å«æœ‰æ›´å®Œæ•´çš„å †æ ˆæ“ä½œçš„ Deque çš„å®ç°ç±»ã€‚</p> <h4 id="linkedlist"><a href="#linkedlist" class="header-anchor">ğŸ‹</a> LinkedList</h4> <p>åŸºäºåŒå‘é“¾è¡¨å®ç°çš„åˆ—è¡¨ã€‚å®ƒåªä¿å­˜äº†ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª Node èŠ‚ç‚¹ï¼Œæ ¹æ®ç´¢å¼•è®¿é—®å…¶å®ƒå…ƒç´ éƒ½éœ€è¦éå†ã€‚</p> <p>LinkedList å®ç°äº† List å’Œ Deque æ¥å£ï¼Œæ‰€ä»¥å®ƒæ˜¯æœ‰åºçš„ï¼Œä½†æ˜¯æ”¯æŒåŒå‘è®¿é—®ï¼Œå¯ä»¥ä½œä¸ºé˜Ÿåˆ—ã€æ ˆã€åŒå‘é˜Ÿåˆ—ä½¿ç”¨ã€‚</p> <details class="custom-block details"><summary>LinkedList æºç æµ…æï¼ˆJDK 15ï¼‰</summary> <p><strong>åº•å±‚æ•°æ®ç»“æ„</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">transient</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// å…ƒç´ ä¸ªæ•°</span>
<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> first<span class="token punctuation">;</span> <span class="token comment">// å¤´èŠ‚ç‚¹</span>
<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> last<span class="token punctuation">;</span> <span class="token comment">// å°¾èŠ‚ç‚¹</span>

<span class="token comment">// Node èŠ‚ç‚¹æ˜¯ä¸ªå†…éƒ¨ç±»ï¼Œæœ‰ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ª Node</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">E</span> item<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>

    <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ‰€æœ‰çš„æ“ä½œæœ€ç»ˆéƒ½æ˜¯åŸºäº Node çš„å¢åˆ æ“ä½œï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// åœ¨å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">linkFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        f<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åœ¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹</span>
<span class="token keyword">void</span> <span class="token function">linkLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        l<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åœ¨ä¸­é—´æ’å…¥èŠ‚ç‚¹</span>
<span class="token keyword">void</span> <span class="token function">linkBefore</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> succ<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert succ != null;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pred <span class="token operator">=</span> succ<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> e<span class="token punctuation">,</span> succ<span class="token punctuation">)</span><span class="token punctuation">;</span>
    succ<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pred <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        pred<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span>
<span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert f == first &amp;&amp; f != null;</span>
    <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> f<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    f<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    f<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// help GC</span>
    first <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        next<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    size<span class="token operator">--</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>
<span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">unlinkLast</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert l == last &amp;&amp; l != null;</span>
    <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> l<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev <span class="token operator">=</span> l<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
    l<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    l<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// help GC</span>
    last <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        first <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    size<span class="token operator">--</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ é™¤ä¸­é—´èŠ‚ç‚¹</span>
<span class="token class-name">E</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert x != null;</span>
    <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> x<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        first <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        last <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        next<span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    x<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    size<span class="token operator">--</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><p><strong>æŸ¥æ‰¾èŠ‚ç‚¹æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">node</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert isElementIndex(index);</span>

    <span class="token comment">// å¦‚æœä¸‹æ ‡å°äºä¸€åŠï¼Œåˆ™ä»å¤´éƒ¨å¼€å§‹æŸ¥æ‰¾ï¼Œå¦åˆ™ä»å°¾éƒ¨å¼€å§‹æŸ¥æ‰¾</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> index<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></details> <h3 id="set-jdk-1-2"><a href="#set-jdk-1-2" class="header-anchor">ğŸ‹</a> Set <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 1.2</span></h3> <p>Set æ˜¯åŒ…å«ä¸å¯é‡å¤å…ƒç´ ï¼ˆé€šå¸¸å¯ä»¥ä¸º nullï¼‰çš„é›†åˆã€‚Set æä¾›äº†ä»¥ä¸‹åŸºæœ¬æ–¹æ³•ï¼š</p> <ul><li>åˆ›å»ºä¸å¯å˜é›†åˆ <code>of(E e1)</code><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 9</span>ã€å¤åˆ¶ä¸èƒ½ä¸º null çš„å…ƒç´ çš„ä¸å¯å˜é›†åˆ <code>copyOf(Collection&lt;? extends E&gt; coll)</code><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 10</span></li></ul> <h4 id="hashset"><a href="#hashset" class="header-anchor">ğŸ‹</a> HashSet</h4> <p>å†…éƒ¨ä½¿ç”¨ HashMap å®ç°çš„é›†åˆã€‚</p> <p>å®ƒä¸ºåŸºæœ¬æ“ä½œ addã€removeã€contains å’Œ size æä¾›äº†æ’å®šçš„æ—¶é—´æ€§èƒ½ï¼Œä½†æ˜¯å¯¹è¯¥é›†åˆè¿­ä»£ä½¿ç”¨çš„æ—¶é—´å’Œå†…éƒ¨å…ƒç´ ä¸ªæ•°åŠ HashMap æ¡¶çš„ä¸ªæ•°ä¹‹å’Œæœ‰å…³ã€‚</p> <details class="custom-block details"><summary>HashSet æºç æµ…æï¼ˆJDK 15ï¼‰</summary> <p><strong>åº•å±‚æ•°æ®ç»“æ„</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> PRESENT <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>æ„é€ å™¨</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// HashMap å®ä¾‹é»˜è®¤åˆå§‹å®¹é‡ä¸º 16ï¼ŒåŠ è½½å› å­ä¸º 0.75</span>

<span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä»¥æŒ‡å®šé›†åˆåˆ›å»ºæ—¶ï¼ŒHashMap ä¿è¯åˆå§‹å®¹é‡å¯ä»¥å®¹çº³æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ </span>
<span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">.75f</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">addAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// LinkedHashSet ä½¿ç”¨</span>
<span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">,</span> <span class="token keyword">boolean</span> dummy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></details> <h4 id="linkedhashset"><a href="#linkedhashset" class="header-anchor">ğŸ‹</a> LinkedHashSet</h4> <p>å†…éƒ¨ä½¿ç”¨ LinkedHashMap å®ç°çš„æœ‰åºé›†åˆã€‚</p> <p>æ­¤ç±»çš„è¿­ä»£æ—¶é—´ä¸å—å®¹é‡å½±å“ï¼›ç”±äºæ·»åŠ åŒæ ·çš„å…ƒç´ ä¸ä¼šæ”¹å˜å®ƒåŸæœ‰çš„é¡ºåºï¼Œå¸¸ç”¨äºé€šè¿‡æ„é€ å™¨ <code>LinkedHashSet(Collection&lt;? extends E&gt; c)</code> å°†å«é‡å¤å…ƒç´ çš„é›†åˆå»é‡å¹¶ä¿æŒåŸæ¥çš„é¡ºåºï¼Œç›¸æ¯” TreeSet æ›´è½»é‡ã€‚</p> <h4 id="treeset"><a href="#treeset" class="header-anchor">ğŸ‹</a> TreeSet</h4> <p>åŸºäº TreeMap çš„æœ‰åºé›†åˆã€‚ä¿è¯ log(n) çš„æ—¶é—´å¤æ‚åº¦ã€‚</p> <h4 id="enumset-jdk-5"><a href="#enumset-jdk-5" class="header-anchor">ğŸ‹</a> EnumSet <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 5</span></h4> <p>JDK 5 æ–°å¢çš„ä¸“é—¨ç”¨äºæšä¸¾ç±»å‹çš„æšä¸¾é›†åˆã€‚å¯ä»¥é€šè¿‡é›†åˆæ“ä½œå¤„ç†æšä¸¾å€¼ã€‚å®ƒæä¾›çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p> <ul><li>è¿”å›è¯¥æšä¸¾ç±»æ‰€æœ‰æšä¸¾å€¼çš„é›†åˆ <code>allOf(Class&lt;E&gt; elementType)</code></li> <li>è¿”å›è¯¥æšä¸¾ç±»çš„ç©ºé›†åˆ <code>noneOf(Class&lt;E&gt; elementType)</code></li> <li>è¿”å›è¯¥æšä¸¾ç±»éƒ¨åˆ†æšä¸¾å€¼çš„é›†åˆ <code>EnumSet&lt;E&gt; copyOf(EnumSet&lt;E&gt; s)</code>ã€<code>copyOf(Collection&lt;E&gt; c)</code>ã€<code>EnumSet&lt;E&gt; of(E e)</code>ã€<code>range(E from, E to)</code></li> <li>è¡¥é›† <code>complementOf(EnumSet&lt;E&gt; s)</code></li></ul> <p>å®ƒå†…éƒ¨ä½¿ç”¨ä½å‘é‡å®ç°ï¼Œéå¸¸ç´§å‡‘å’Œé«˜æ•ˆï¼Œå…·æœ‰æå¥½çš„æ—¶ç©ºæ€§èƒ½ï¼Œå‡ ä¹æ‰€æœ‰æ“ä½œéƒ½åœ¨å›ºå®šæ—¶é—´å†…è¿è¡Œã€‚</p> <h3 id="queue-jdk-5"><a href="#queue-jdk-5" class="header-anchor">ğŸ‹</a> Queue <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 5</span></h3> <p>JDK 5 æ–°å¢çš„ Queue æ˜¯åŸºäºä¼˜å…ˆçº§å †å®ç°çš„æ— é™ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¼šæ ¹æ®ä¼˜å…ˆçº§è¿›è¡Œæ’åºã€‚é˜Ÿåˆ—ä¸­é€šå¸¸ä¸èƒ½å­˜å‚¨ null å€¼ï¼ˆLinkedList é™¤å¤–ï¼‰ï¼Œé˜Ÿåˆ—çš„æ¯ç§æ“ä½œéƒ½æœ‰ä¸¤ç§å½¢å¼ï¼š</p> <ul><li>ä¸€ç§æ˜¯æ“ä½œå¤±è´¥ä¼šæŠ›å‡ºå¼‚å¸¸
<ul><li><code>add(E e)</code></li> <li><code>remove()</code></li> <li><code>element()</code></li></ul></li> <li>ä¸€ç§æ˜¯æ“ä½œå¤±è´¥ä¼šè¿”å›ç‰¹æ®Šå€¼ null æˆ–è€… false
<ul><li><code>offer(E e)</code></li> <li><code>poll()</code></li> <li><code>peek()</code></li></ul></li></ul> <h4 id="priorityqueue"><a href="#priorityqueue" class="header-anchor">ğŸ‹</a> PriorityQueue</h4> <p>PriorityQueue æ˜¯åŸºäºäºŒè¿›åˆ¶å †å®ç°çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå¯é€šè¿‡æ„é€ å™¨ä¼ å…¥å…ƒç´ ä¼˜å…ˆçº§æ¯”è¾ƒå™¨ Comparatorï¼Œä¸æŒ‡å®šåˆ™é»˜è®¤å…ƒç´ çš„è‡ªç„¶æ¯”è¾ƒæ’åºï¼Œå³å…ƒç´ éœ€è¦å®ç° Comparableï¼Œæ˜¯å¯æ¯”è¾ƒçš„ã€‚</p> <details class="custom-block details"><summary>PriorityQueue æºç æµ…æï¼ˆJDK 15ï¼‰</summary> <p><strong>åº•å±‚æ•°æ®ç»“æ„</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// è¡¨ç¤ºåŸºäºå¹³è¡¡äºŒå‰æ ‘çš„æœ€å°å †çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œqueue[n] çš„ä¸¤ä¸ªå­©å­æ˜¯ queue[2 * n + 1] å’Œ queue[2 *(n + 1)]</span>
<span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> queue<span class="token punctuation">;</span>
<span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token comment">// é€šè¿‡æ¯”è¾ƒå™¨å®ç°å¯¹äºå †ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å°äºç­‰äºå®ƒçš„å­©å­èŠ‚ç‚¹ï¼Œæ¯”è¾ƒå™¨ä¸º null åˆ™ä½¿ç”¨å…ƒç´ çš„è‡ªç„¶æ’åº</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;serial&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Conditionally serializable</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> comparator<span class="token punctuation">;</span>

<span class="token keyword">transient</span> <span class="token keyword">int</span> modCount<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>å †æ•°ç»„çš„æ‰©å®¹æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> queue<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// Double size if small; else grow by 50%</span>
    <span class="token comment">// å¦‚æœå½“å‰å¤§å°å°äº 64 åˆ™æ¯æ¬¡å¢åŠ  2ï¼Œå¦åˆ™å¢åŠ ä¸€åŠ</span>
    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> <span class="token class-name">ArraysSupport</span><span class="token punctuation">.</span><span class="token function">newLength</span><span class="token punctuation">(</span>oldCapacity<span class="token punctuation">,</span>
                                              minCapacity <span class="token operator">-</span> oldCapacity<span class="token punctuation">,</span> <span class="token comment">/* minimum growth */</span>
                                              oldCapacity <span class="token operator">&lt;</span> <span class="token number">64</span> <span class="token operator">?</span> oldCapacity <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">:</span> oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span>
                                              <span class="token comment">/* preferred growth */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    queue <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>å¯¹äºå †è°ƒæ•´çš„æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ç”±äºFloyd (1964) äº§ç”Ÿçš„ O(size) ç®—æ³•ï¼Œåœ¨æ•´ä¸ªæ ‘ä¸­å»ºç«‹å †ä¸å˜å¼ï¼š</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> es <span class="token operator">=</span> queue<span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> size<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> cmp<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cmp <span class="token operator">=</span> comparator<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            <span class="token function">siftDownComparable</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> es<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            <span class="token function">siftDownUsingComparator</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> es<span class="token punctuation">,</span> n<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">siftUpComparable</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token class-name">T</span> x<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> es<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> key <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> x<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> e <span class="token operator">=</span> es<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> e<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        k <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> key<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">siftUpUsingComparator</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token class-name">T</span> x<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> es<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> cmp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> e <span class="token operator">=</span> es<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> e<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        k <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">siftDownComparable</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token class-name">T</span> x<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> es<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert n &gt; 0;</span>
    <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> key <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>x<span class="token punctuation">;</span>
    <span class="token keyword">int</span> half <span class="token operator">=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token comment">// loop while a non-leaf</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> half<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> child <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// assume left child is least</span>
        <span class="token class-name">Object</span> c <span class="token operator">=</span> es<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> right <span class="token operator">=</span> child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> c<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> es<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            c <span class="token operator">=</span> es<span class="token punctuation">[</span>child <span class="token operator">=</span> right<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
        k <span class="token operator">=</span> child<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> key<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">siftDownUsingComparator</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token class-name">T</span> x<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> es<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> cmp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assert n &gt; 0;</span>
    <span class="token keyword">int</span> half <span class="token operator">=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> half<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> child <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> c <span class="token operator">=</span> es<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> right <span class="token operator">=</span> child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> cmp<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> c<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> es<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            c <span class="token operator">=</span> es<span class="token punctuation">[</span>child <span class="token operator">=</span> right<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
        k <span class="token operator">=</span> child<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    es<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div></details> <h3 id="deque-jdk-6"><a href="#deque-jdk-6" class="header-anchor">ğŸ‹</a> Deque <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 6</span></h3> <p>Deque æ¥å£æ˜¯ç»§æ‰¿äº† Queue æ¥å£çš„åŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒä»é˜Ÿåˆ—ä¸¤ç«¯è¿›è¡Œæ“ä½œã€‚</p> <h4 id="arraydeque"><a href="#arraydeque" class="header-anchor">ğŸ‹</a> ArrayDeque</h4> <p>ArrayDeque æ˜¯åŸºäºå¯è°ƒæ•´å¤§å°çš„åœ†å½¢æ•°ç»„çš„æ— ç•ŒåŒç«¯é˜Ÿåˆ—ã€‚å®˜æ–¹è¯´ï¼Œå½“ç”¨ä½œå †æ ˆæ—¶ï¼Œæ­¤ç±»æ¯” Stack ç±»å¿«ï¼›å½“ç”¨ä½œé˜Ÿåˆ—æ—¶ï¼Œæ­¤ç±»æ¯” LinkedList ç±»å¿«ã€‚</p> <p>ArrayDeque å¤§éƒ¨åˆ†æ–¹æ³•ä»¥å›ºå®šæ—¶é—´æ‰§è¡Œï¼Œé™¤äº†æ‰¹é‡æ“ä½œåŠ <code>remove(Object)</code>ã€<code>removeFirstOccurrence(Object o)</code>ã€<code>removeLastOccurrence(Object o)</code>ã€<code>contains(Object o)</code>ã€<code>iterator.remove()</code> ä»¥çº¿æ€§æ—¶é—´è¿è¡Œã€‚</p> <details class="custom-block details"><summary>ArrayDeque æºç æµ…æï¼ˆJDK 15ï¼‰</summary> <p><strong>åº•å±‚æ•°æ®ç»“æ„</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// è™šæ‹Ÿæœºæ“…é•¿ä¼˜åŒ–ç®€å•çš„æ•°ç»„å¾ªç¯ï¼Œå…¶ä¸­ç´¢å¼•åœ¨æœ‰æ•ˆåˆ‡ç‰‡ä¸Šé€’å¢æˆ–é€’å‡ã€‚</span>
<span class="token comment">// å› ä¸ºåœ¨åœ†å½¢æ•°ç»„ä¸­ï¼Œå…ƒç´ é€šå¸¸å­˜å‚¨åœ¨ä¸¤ä¸ªä¸ç›¸äº¤çš„åˆ‡ç‰‡ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¸ºå…ƒç´ ä¸Šçš„æ‰€æœ‰éå†ç¼–å†™ä¸å¯»å¸¸çš„åµŒå¥—å¾ªç¯æ¥å¸®åŠ©è™šæ‹Ÿæœº.</span>
<span class="token comment">// ä»…å…·æœ‰ä¸€ä¸ªçƒ­çš„å†…éƒ¨å¾ªç¯ä¸»ä½“è€Œä¸æ˜¯ä¸¤ä¸ªæˆ–ä¸‰ä¸ªï¼Œå¯ä»¥ç®€åŒ–äººå·¥ç»´æŠ¤ï¼Œå¹¶é¼“åŠ±VMå¾ªç¯å†…è”åˆ°è°ƒç”¨è€…ä¸­ã€‚</span>

<span class="token comment">// å­˜å‚¨åŒç«¯é˜Ÿåˆ—å…ƒç´ çš„æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªä¸å«å…ƒç´ çš„ä½ç½®éƒ½ä¸º nullï¼Œæ•°ç»„è‡³å°‘æœ‰ä¸€ä¸ª nullï¼ˆåœ¨å°¾éƒ¨ï¼‰</span>
<span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements<span class="token punctuation">;</span>

<span class="token comment">// å¤´éƒ¨ç´¢å¼•ï¼Œ0 &lt;= head &lt; elements.lengthï¼ŒåŒç«¯é˜Ÿåˆ—ä¸ºç©ºæ—¶ head = tail</span>
<span class="token keyword">transient</span> <span class="token keyword">int</span> head<span class="token punctuation">;</span>

<span class="token comment">// å°¾éƒ¨ç´¢å¼•ï¼Œä½œä¸ºä¸‹ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°å°¾éƒ¨çš„ç´¢å¼•ï¼Œelements[tail] å§‹ç»ˆä¸º null</span>
<span class="token keyword">transient</span> <span class="token keyword">int</span> tail<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAX_ARRAY_SIZE <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>å®¹é‡æ‰©å……æºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> needed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// overflow-conscious code</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span> newCapacity<span class="token punctuation">;</span>
    <span class="token comment">// Double capacity if small; else grow by 50%</span>
    <span class="token keyword">int</span> jump <span class="token operator">=</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&lt;</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>jump <span class="token operator">&lt;</span> needed
        <span class="token operator">||</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">=</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">+</span> jump<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> MAX_ARRAY_SIZE <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        newCapacity <span class="token operator">=</span> <span class="token function">newCapacity</span><span class="token punctuation">(</span>needed<span class="token punctuation">,</span> jump<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> es <span class="token operator">=</span> elements <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Exceptionally, here tail == head needs to be disambiguated</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tail <span class="token operator">&lt;</span> head <span class="token operator">||</span> <span class="token punctuation">(</span>tail <span class="token operator">==</span> head <span class="token operator">&amp;&amp;</span> es<span class="token punctuation">[</span>head<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// wrap around; slide first leg forward to end of array</span>
        <span class="token keyword">int</span> newSpace <span class="token operator">=</span> newCapacity <span class="token operator">-</span> oldCapacity<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>es<span class="token punctuation">,</span> head<span class="token punctuation">,</span>
                         es<span class="token punctuation">,</span> head <span class="token operator">+</span> newSpace<span class="token punctuation">,</span>
                         oldCapacity <span class="token operator">-</span> head<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> head<span class="token punctuation">,</span> <span class="token keyword">to</span> <span class="token operator">=</span> <span class="token punctuation">(</span>head <span class="token operator">+=</span> newSpace<span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">to</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            es<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/** Capacity calculation for edge conditions, especially overflow. */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">newCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> needed<span class="token punctuation">,</span> <span class="token keyword">int</span> jump<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">,</span> minCapacity<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>minCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> needed<span class="token punctuation">)</span> <span class="token operator">-</span> MAX_ARRAY_SIZE <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;Sorry, deque too big&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>needed <span class="token operator">&gt;</span> jump<span class="token punctuation">)</span>
        <span class="token keyword">return</span> minCapacity<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">+</span> jump <span class="token operator">-</span> MAX_ARRAY_SIZE <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token operator">?</span> oldCapacity <span class="token operator">+</span> jump
        <span class="token operator">:</span> MAX_ARRAY_SIZE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><strong>åŒç«¯é˜Ÿåˆ—æ“ä½œæºç å¦‚ä¸‹ï¼š</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Circularly increments i, mod modulus.
 * Precondition and postcondition: 0 &lt;= i &lt; modulus.
 */</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">inc</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> modulus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>i <span class="token operator">&gt;=</span> modulus<span class="token punctuation">)</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Circularly decrements i, mod modulus.
 * Precondition and postcondition: 0 &lt;= i &lt; modulus.
 */</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">dec</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> modulus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span>i <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> i <span class="token operator">=</span> modulus <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Circularly adds the given distance to index i, mod modulus.
 * Precondition: 0 &lt;= i &lt; modulus, 0 &lt;= distance &lt;= modulus.
 * @return index 0 &lt;= i &lt; modulus
 */</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">inc</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> distance<span class="token punctuation">,</span> <span class="token keyword">int</span> modulus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">+=</span> distance<span class="token punctuation">)</span> <span class="token operator">-</span> modulus <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> i <span class="token operator">-=</span> modulus<span class="token punctuation">;</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Subtracts j from i, mod modulus.
 * Index i must be logically ahead of index j.
 * Precondition: 0 &lt;= i &lt; modulus, 0 &lt;= j &lt; modulus.
 * @return the &quot;circular distance&quot; from j to i; corner case i == j
 * is disambiguated to &quot;empty&quot;, returning 0.
 */</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">,</span> <span class="token keyword">int</span> modulus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">-=</span> j<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> i <span class="token operator">+=</span> modulus<span class="token punctuation">;</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div></details> <h2 id="map"><a href="#map" class="header-anchor">ğŸ‹</a> Map</h2> <p><img src="https://pycrab.github.io/KeepJava/assets/media/jdk-collections-map.png" alt="Map ç±»å›¾.png"></p> <p>Map æ˜¯å­˜å‚¨é”®å€¼å¯¹çš„å¯¹è±¡ï¼Œé”®ä¸èƒ½ä¸º nullï¼Œæ¯ä¸ªé”®æœ€å¤šæ˜ å°„ä¸€ä¸ªå€¼ã€‚Map æ¥å£æä¾›çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p> <ul><li>è·å–é”®å€¼å¯¹ä¸ªæ•° <code>size()</code>ã€æ¸…ç©ºé”®å€¼å¯¹ <code>clear()</code>ã€</li> <li>åˆ¤æ–­æ˜¯å¦æ²¡æœ‰é”®å€¼å¯¹ <code>isEmpty()</code>ã€æ˜¯å¦åŒ…å«é”® <code>containsKey(Object o)</code>ã€æ˜¯å¦åŒ…å«å€¼ <code>containsValue(Object o)</code></li> <li>è·å–é”®å¯¹åº”çš„å€¼ <code>get(Object o)</code>ã€è·å–é”®å¯¹åº”çš„å€¼ï¼Œæ²¡æœ‰è¿”å›æä¾›çš„é»˜è®¤å€¼ <code>getOrDefault(Object key, V defaultValue)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 8</span></li> <li>æ·»åŠ é”®å€¼å¯¹ <code>put(K k, V v)</code>ã€æ‰¹é‡æ·»åŠ  <code>putAll(Map&lt;? extends K, ? extends V&gt; m)</code>ã€é”®æœ‰å€¼è¿”å›ï¼Œæ²¡æœ‰æ·»åŠ  <code>putIfAbsent(K key, V value)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 8</span></li> <li>åˆ é™¤é”®å€¼å¯¹ <code>remove(Object o)</code>ã€åˆ é™¤å¯¹åº”çš„é”®å€¼å¯¹ <code>remove(Object key, Object value)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 8</span></li> <li>æ›¿æ¢é”®çš„å€¼ <code>replace(K key, V value)</code>ã€<code>replace(K key, V oldValue, V newValue)</code> ã€<code>replaceAll(BiFunction&lt;? super K, ? super V, ? extends V&gt; function)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 8</span></li> <li>éå† <code>forEach(BiConsumer&lt;? super K, ? super V&gt; action)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 8</span></li> <li>æŒ‡å®šé”®å€¼å…³ç³» <code>compute()</code>ã€<code>merge</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 8</span></li> <li>æ„é€ ä¸å¯å˜å“ˆå¸Œè¡¨ <code>of(K k1, V v1)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 9</span>ã€<code>ofEntries(Entry&lt;? extends K, ? extends V&gt;... entries)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 9</span>ã€<code>entry(K k, V v)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 9</span>ã€<code>copyOf(Map&lt;? extends K, ? extends V&gt; map)</code> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 10</span></li></ul> <p>Map æä¾›äº†ä¸‰ç§è§†å›¾ï¼š</p> <ul><li>é”®çš„é›†åˆ <code>keySet()</code></li> <li>å€¼çš„é›†åˆ <code>values()</code></li> <li>é”®å€¼å¯¹çš„é›†åˆ <code>entrySet()</code></li></ul> <h4 id="hashmap"><a href="#hashmap" class="header-anchor">ğŸ‹</a> HashMap</h4> <p>åŸºäºå“ˆå¸Œè¡¨å®ç°ã€‚</p> <p>å®ƒä¸ºåŸºæœ¬çš„ getã€put æ“ä½œæä¾›æ’å®šæ—¶é—´çš„æ€§èƒ½ï¼Œä½†æ˜¯è¿­ä»£æ€§èƒ½å’Œæ¡¶çš„æ•°é‡åŠé”®å€¼å¯¹çš„æ•°é‡æˆæ¯”ä¾‹ï¼Œå¦‚æœéœ€è¦è¿­ä»£ï¼Œåˆå§‹å®¹é‡ä¸è¦å¤ªé«˜ï¼Œè´Ÿè½½å› å­ä¸è¦å¤ªä½ã€‚</p> <p>HashMap çš„å®ä¾‹æœ‰ä¸¤ä¸ªå½±å“æ€§èƒ½çš„å‚æ•°ï¼šåˆå§‹å®¹é‡å’Œè´Ÿè½½å› å­ã€‚å¦‚æœå“ˆå¸Œè¡¨ä¸­çš„æ¡ç›®æ•°é‡è¶…è¿‡è´Ÿè½½å› å­å’Œå½“å‰å®¹é‡çš„ä¹˜ç§¯ï¼Œå“ˆå¸Œè¡¨ä¼šé‡å»ºã€‚å¦‚æœè¦å­˜å‚¨å¾ˆå¯¹é”®å€¼å¯¹ï¼ŒæŒ‡å®šåˆå§‹å®¹é‡å°†æé«˜å­˜å‚¨æ•ˆç‡ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨æ‰©å®¹ã€‚å¦‚æœé”®çš„ hashcode() ç›¸åŒè‚¯å®šä¼šé™ä½æ€§èƒ½ï¼Œæ‰€ä»¥å°½é‡æé«˜é”®çš„å¯æ¯”æ€§ï¼ˆComparableï¼‰ã€‚</p> <details class="custom-block details"><summary>HashMap æºç æµ…æï¼ˆJDK 15ï¼‰</summary> <p><strong>åº•å±‚æ•°æ®ç»“æ„</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// é”®å€¼å¯¹èŠ‚ç‚¹</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
    <span class="token class-name">V</span> value<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>

    <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hash <span class="token operator">=</span> hash<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">K</span> <span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> key <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">V</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">V</span> oldValue <span class="token operator">=</span> value<span class="token punctuation">;</span>
        value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>o<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
                <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span> <span class="token comment">// å“ˆå¸Œè¡¨ï¼Œé¦–æ¬¡ä½¿ç”¨æ—¶åˆå§‹åŒ–ï¼Œæ‰©å®¹æ—¶åˆ†é…é•¿åº¦å§‹ç»ˆæ˜¯ 2 çš„å¹‚</span>
<span class="token keyword">transient</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span> <span class="token comment">// é”®å€¼å¯¹ä¸ªæ•°</span>
<span class="token keyword">int</span> threshold<span class="token punctuation">;</span> <span class="token comment">// capacity * load factorï¼Œä¸‹ä¸€æ¬¡åˆ†é…çš„å¤§å°</span>
<span class="token keyword">final</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">;</span> <span class="token comment">// è´Ÿè½½å› å­</span>

<span class="token keyword">transient</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entrySet<span class="token punctuation">;</span> 
<span class="token keyword">transient</span> <span class="token keyword">int</span> modCount<span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INITIAL_CAPACITY <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// aka 16 åˆå§‹å®¹é‡ï¼Œå¿…é¡»ä¸º 2 çš„å¹‚</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAXIMUM_CAPACITY <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// æœ€å¤§å®¹é‡</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">float</span> DEFAULT_LOAD_FACTOR <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// æ¡¶çš„ä¸ªæ•°ï¼Œæ¡¶ä¼šè½¬ä¸ºæ ‘ï¼Œè¯¥å€¼å¿…é¡»å¤§äº 2ï¼Œå¹¶ä¸”è‡³å°‘åº”ä¸º 8 æ‰èƒ½ä»æ ‘å†å˜å›æ¡¶</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> UNTREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">// å–æ¶ˆæ ‘åŒ–çš„ä»“ä½é˜ˆå€¼ï¼Œå°äº TREEIFY_THRESHOLDï¼Œæœ€å¤§ä¸º 6</span>
<span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MIN_TREEIFY_CAPACITY <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span> <span class="token comment">// å¯ä»¥æ ‘åŒ–çš„æœ€å°å®¹é‡ï¼Œåº”è¯¥è‡³å°‘ä¸º 4 * TREEIFY_THRESHOLD</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div></details> <h4 id="linkedhashmap"><a href="#linkedhashmap" class="header-anchor">ğŸ‹</a> LinkedHashMap</h4> <p>åŸºäºå“ˆå¸Œè¡¨å’ŒåŒå‘é“¾è¡¨å®ç°çš„æœ‰åºçš„é”®å€¼å¯¹é›†åˆã€‚</p> <p>é»˜è®¤æ ¹æ®æ’å…¥é¡ºåºæ’åºï¼Œä½†æ˜¯ä¹Ÿæä¾›äº†æ„é€ å™¨ <code>LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)</code> å¯ä»¥æŒ‡å®šæ’åºæ¨¡å¼ï¼ˆtrue æ ¹æ®è®¿é—®é¡ºåºï¼Œfalse æ ¹æ®æ’å…¥é¡ºåºï¼‰ï¼Œæ ¹æ®è®¿é—®é¡ºåºå¯ä»¥å®ç°æœ€è¿‘æœ€å°‘è®¿é—®çš„å“ˆå¸Œè¡¨ï¼Œéå¸¸é€‚åˆæ„å»º LRU ç¼“å­˜ã€‚</p> <details class="custom-block details"><summary>ä»£ç ç¤ºä¾‹ï¼šLRU ç¼“å­˜</summary> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedHashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * ä½¿ç”¨ LinkedHashMapå®ç° LRU ç¼“å­˜ç®—æ³•ï¼ŒLRU ç¼“å­˜ç®—æ³•å³åˆ é™¤æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®
     * &lt;p&gt;
     * å®ç°æ€è·¯ä¸ºï¼š
     * 1.æ¯æ¬¡è®¿é—®ä¸€ä¸ªæ•°æ®åˆ™æŠŠè¿™ä¸ªæ•°æ®ç§»åˆ°é˜Ÿåˆ—å°¾éƒ¨
     * 2.ç¼“å­˜æ»¡äº†åˆ™åˆ é™¤é˜Ÿåˆ—é¦–éƒ¨çš„æ•°æ®ï¼Œå³åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„ï¼Œ
     * 3.åˆ é™¤åï¼Œåé¢çš„æ•°æ®éœ€è¦å‘å‰è¡¥ä½
     * &lt;p&gt;
     * ç»¼åˆè€ƒè™‘ä½¿ç”¨ LinkedHashMap æ¥å®ç°ï¼ŒåŸå› ä¸ºï¼š
     * 1.ä½¿ç”¨é“¾è¡¨ç»“æ„ï¼Œç§»åŠ¨æ•°æ®æ¯”è¾ƒå¿«éœ€è¦ O(1) æ—¶é—´ï¼›ä½¿ç”¨æ•°ç»„éœ€è¦ O(n) æ—¶é—´
     * 2.å…¶æä¾›å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œè®¾ç½®ä½¿ç”¨è®¿é—®é¡ºåºéå†
     * 3.åœ¨è®¿é—®é¡ºåºä¸‹ï¼Œå…¶ get æ–¹æ³•é™¤äº†è¿”å›æ•°æ®è¿˜ä¼šå°†è®¿é—®çš„æ•°æ®æ”¾åˆ°é“¾è¡¨å°¾éƒ¨ï¼Œæ¯æ¬¡åªéœ€ remove é¦–éƒ¨çš„æ•°æ®
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">LRUCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

        <span class="token comment">// ç¼“å­˜æœ€å¤§å®¹é‡</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> maxCapacity<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">LRUCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>maxCapacity<span class="token punctuation">,</span> <span class="token number">0.75f</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>maxCapacity <span class="token operator">=</span> maxCapacity<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeEldestEntry</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> eldest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> maxCapacity<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æµ‹è¯•ä¸€ä¸‹ï¼Œè®¾ç½®ç¼“å­˜æœ€å¤§å®¹é‡ä¸º4</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LRUCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;h&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;he&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;hel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;hell&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å°†ä¾æ¬¡è¾“å‡º2ã€4ã€5ã€3ï¼Œå› å­˜å‚¨5ä¸ªæ•°æ®è¶…å‡ºç¼“å­˜æœ€å¤§å®¹é‡ï¼Œè‡ªåŠ¨åˆ é™¤é¦–éƒ¨æ•°æ®1ï¼›ä¹‹åè®¿é—®3ï¼Œå°†3ç§»åˆ°å°¾éƒ¨</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div></details> <h4 id="treemap"><a href="#treemap" class="header-anchor">ğŸ‹</a> TreeMap</h4> <p>åŸºäºçº¢é»‘æ ‘å®ç°çš„æœ‰åºçš„é”®å€¼å¯¹é›†åˆã€‚</p> <h4 id="enummap"><a href="#enummap" class="header-anchor">ğŸ‹</a> EnumMap</h4> <h4 id="weakhashmap"><a href="#weakhashmap" class="header-anchor">ğŸ‹</a> WeakHashMap</h4> <p>åŸºäºå“ˆå¸Œè¡¨å®ç°çš„å¸¦æœ‰å¼±é”®çš„é›†åˆï¼Œå½“é”®è¢«å›æ”¶ï¼Œåˆ™é”®å€¼å¯¹ä¼šè‡ªåŠ¨åˆ é™¤ã€‚</p> <h4 id="identityhashmap"><a href="#identityhashmap" class="header-anchor">ğŸ‹</a> IdentityHashMap</h4> <p>åŸºäºå“ˆå¸Œè¡¨å®ç°çš„é›†åˆï¼Œæ¯”è¾ƒé”®å’Œå€¼æ—¶ä½¿ç”¨ == è€Œä¸æ˜¯ equals()ï¼Œç”¨äºåºåˆ—åŒ–å’Œæ·±æ‹·è´ã€‚</p> <h4 id="hashtable"><a href="#hashtable" class="header-anchor">ğŸ‹</a> Hashtable</h4> <p>ä¸ HashMap ç±»ä¼¼ï¼Œä½† Hashtable ä¸å…è®¸ç©ºå€¼ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p> <h4 id="properties"><a href="#properties" class="header-anchor">ğŸ‹</a> Properties</h4> <p>çº¿ç¨‹å®‰å…¨çš„å±æ€§è¡¨ï¼Œæ¯ä¸ªé”®å€¼å¯¹éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯ä»¥æŒä¹…åŒ–ã€‚</p> <h2 id="fail-fast-æœºåˆ¶"><a href="#fail-fast-æœºåˆ¶" class="header-anchor">ğŸ‹</a> fail - fast æœºåˆ¶</h2> <p>å½“åˆ›å»ºè¿­ä»£å™¨ä¹‹åï¼Œå¦‚æœé›†åˆçš„ç»“æ„æ”¹å˜ï¼ˆé™¤äº†é€šè¿‡è¿­ä»£å™¨çš„ <code>remove()</code> å’Œ <code>add()</code> æ–¹æ³•ä¹‹å¤–ï¼‰ï¼Œå°±ä¼šå°½æœ€å¤§åŠªåŠ›æŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚è¯¥æœºåˆ¶ä»…ç”¨äºæ£€æµ‹é”™è¯¯ï¼Œä¸èƒ½ç”¨äºå¼‚å¸¸å¤„ç†ã€‚</p> <h2 id="collections-ç±»"><a href="#collections-ç±»" class="header-anchor">ğŸ‹</a> Collections ç±»</h2> <p>Collections ç±»æä¾›äº†é™æ€æ–¹æ³•å¯¹é›†åˆè¿›è¡Œæ“ä½œï¼Œæˆ–è€…é€šè¿‡åŒ…è£…è¿”å›æ–°é›†åˆã€‚</p> <p>ä»¥ä¸Šé›†åˆé™¤äº† Vectorã€Hashtableã€Properties éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœéœ€è¦å¹¶å‘å¤„ç†ï¼Œåˆ™éœ€è¦ Collecitons ç±»æä¾›çš„åŒæ­¥åŒ…è£…æ–¹æ³•ï¼Œä½¿ç”¨å¦‚ä¸‹åŒ…è£…æ–¹æ³•è¿”å›çš„é›†åˆè¿›è¡Œè¿­ä»£å™¨æˆ– Stream éå†æ—¶éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ synchronized åŒæ­¥å—åŒ…è£¹ï¼š</p> <ul><li><code>synchronizedList(List&lt;T&gt; list)</code></li> <li><code>synchronizedSet(Set&lt;T&gt; s)</code>ã€<code>synchronizedSortedSet(SortedSet&lt;T&gt; s)</code>ã€<code>synchronizedNavigableSet(NavigableSet&lt;T&gt; s)</code></li> <li><code>synchronizedMap(Map&lt;K,V&gt; m)</code>ã€<code>synchronizedSortedMap(SortedMap&lt;K,V&gt; m)</code>ã€<code>synchronizedNavigableMap(NavigableMap&lt;K,V&gt; m)</code></li></ul> <p>å¦‚æœéœ€è¦è®©é›†åˆåªè¯»ï¼Œå¯ä»¥ä½¿ç”¨åªè¯»åŒ…è£…æ–¹æ³•ï¼š</p> <ul><li><code>unmodifiableList(List&lt;? extends T&gt; list)</code> ç­‰ï¼ˆåŒä¸Š unmodifiable å¼€å¤´ï¼‰</li></ul> <p>è¿˜å¯ä»¥è¿”å›åªè¯»çš„ç©ºé›†åˆæˆ–è€…å•ä¾‹é›†åˆï¼š</p> <ul><li><code>emptyList()</code> EMPTY_LIST ç­‰ï¼ˆåŒä¸Š empty å¼€å¤´ï¼‰</li> <li><code>singletonList(T o)</code> åªèƒ½å«æœ‰ä¸€ä¸ªå…ƒç´ çš„ä¸å¯å˜åˆ—è¡¨</li> <li><code>singleton(T o)</code> åªèƒ½å«æœ‰ä¸€ä¸ªå…ƒç´ çš„ä¸å¯å˜é›†åˆ</li> <li><code>singletonMap(K key, V value)</code>ï¼Œåªèƒ½å«æœ‰ä¸€ä¸ªé”®å€¼å¯¹çš„ä¸å¯å˜é›†åˆ</li></ul> <p>Collections ç±»è¿˜æä¾›äº†å¾ˆå¤šå®ç”¨æ–¹æ³•ï¼š</p> <ul><li>é›†åˆåè½¬ <code>reverse(List&lt;?&gt; list)</code></li> <li>éšæœºæ‰“ä¹±é›†åˆå…ƒç´  <code>shuffle(List&lt;?&gt; list)</code></li> <li>é›†åˆå…ƒç´ æ¢ä½ <code>swap(List&lt;?&gt; list, int i, int j)</code></li> <li>æ›¿æ¢å…¨éƒ¨å…ƒç´  <code>fill(List&lt;? super T&gt; list, T obj)</code></li> <li>é›†åˆå¤åˆ¶ <code>copy(List&lt;? super T&gt; dest, List&lt;? extends T&gt; src)</code></li> <li>è¿”å›æœ€å€¼ <code>min(Collection&lt;? extends T&gt; coll)</code>ã€<code>max(Collection&lt;? extends T&gt; coll)</code></li></ul> <h2 id="å¹¶å‘å®‰å…¨"><a href="#å¹¶å‘å®‰å…¨" class="header-anchor">ğŸ‹</a> å¹¶å‘å®‰å…¨</h2> <p>ä½¿ç”¨ Collections ç±»æä¾›çš„æ–¹æ³•å¯¹ä¸å®‰å…¨çš„é›†åˆè¿›è¡ŒåŒ…è£…éœ€è¦æ‰‹åŠ¨è¿›è¡ŒåŒæ­¥ï¼Œä¸ºäº†é¿å…åŒæ­¥ JDK 5 å¢åŠ äº†å¦‚ä¸‹å¹¶å‘é›†åˆç±»ï¼š</p> <h3 id="copyonwritearraylist"><a href="#copyonwritearraylist" class="header-anchor">ğŸ‹</a> CopyOnWriteArrayList</h3> <p>æ›¿ä»£ ArrayList çš„å¹¶å‘å®‰å…¨çš„åˆ—è¡¨ã€‚</p> <h3 id="copyonwritearrayset"><a href="#copyonwritearrayset" class="header-anchor">ğŸ‹</a> CopyOnWriteArraySet</h3> <p>åº•å±‚ä½¿ç”¨ CopyOnWriteArrayList è¿›è¡Œæ‰€æœ‰æ“ä½œçš„å¹¶å‘å®‰å…¨çš„é›†åˆã€‚</p> <h3 id="concurrenthashmap"><a href="#concurrenthashmap" class="header-anchor">ğŸ‹</a> ConcurrentHashMap</h3> <p>å’Œ Hashtable ç±»ä¼¼çš„å¹¶å‘å®‰å…¨çš„å“ˆå¸Œè¡¨ã€‚</p> <h3 id="concurrentskiplistmap-jdk-6"><a href="#concurrentskiplistmap-jdk-6" class="header-anchor">ğŸ‹</a> ConcurrentSkipListMap <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>JDK 6</span></h3> <p>åŸºäº SkipLists çš„å˜ä½“å®ç°çš„å¯æŒ‰é¡ºåºæ’åˆ—çš„å¹¶å‘å®‰å…¨çš„å“ˆå¸Œè¡¨ã€‚</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/pycrab/KeepJava/edit/master/jdk/collection/README.md" target="_blank" rel="noopener noreferrer">Edit Me On Github</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020/12/3 ä¸‹åˆ3:48:31</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/KeepJava/jdk/generics/" class="prev">
        Java æ³›å‹
      </a></span> <span class="next"><a href="/KeepJava/jdk/io/">
        Java IO
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/KeepJava/assets/js/app.95e4ac80.js" defer></script><script src="/KeepJava/assets/js/2.73d6ef14.js" defer></script><script src="/KeepJava/assets/js/17.8a8fe6dc.js" defer></script><script src="/KeepJava/assets/js/3.596aa5f2.js" defer></script>
  </body>
</html>
