<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java ä¼ ç»Ÿ IO ç±»åº“ | KeepJava</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Java ä¼ ç»Ÿ IO æµ">
    <meta name="keywords" content="Java ä¼ ç»Ÿ IO æµ">
    <link rel="preload" href="/KeepJava/assets/css/0.styles.0321c629.css" as="style"><link rel="preload" href="/KeepJava/assets/js/app.95e4ac80.js" as="script"><link rel="preload" href="/KeepJava/assets/js/2.73d6ef14.js" as="script"><link rel="preload" href="/KeepJava/assets/js/33.1775ff36.js" as="script"><link rel="prefetch" href="/KeepJava/assets/js/10.f77a3b1c.js"><link rel="prefetch" href="/KeepJava/assets/js/11.f2c39f13.js"><link rel="prefetch" href="/KeepJava/assets/js/12.7295ba16.js"><link rel="prefetch" href="/KeepJava/assets/js/13.cc733961.js"><link rel="prefetch" href="/KeepJava/assets/js/14.c0a99400.js"><link rel="prefetch" href="/KeepJava/assets/js/15.e38b5c52.js"><link rel="prefetch" href="/KeepJava/assets/js/16.8118b0f3.js"><link rel="prefetch" href="/KeepJava/assets/js/17.8a8fe6dc.js"><link rel="prefetch" href="/KeepJava/assets/js/18.6432444b.js"><link rel="prefetch" href="/KeepJava/assets/js/19.a3be88a3.js"><link rel="prefetch" href="/KeepJava/assets/js/20.c5e50ea4.js"><link rel="prefetch" href="/KeepJava/assets/js/21.964f1dfe.js"><link rel="prefetch" href="/KeepJava/assets/js/22.0dcbf95f.js"><link rel="prefetch" href="/KeepJava/assets/js/23.ced2e82f.js"><link rel="prefetch" href="/KeepJava/assets/js/24.6351a6c5.js"><link rel="prefetch" href="/KeepJava/assets/js/25.3cc78923.js"><link rel="prefetch" href="/KeepJava/assets/js/26.87ab7653.js"><link rel="prefetch" href="/KeepJava/assets/js/27.ebe07d00.js"><link rel="prefetch" href="/KeepJava/assets/js/28.e32b4030.js"><link rel="prefetch" href="/KeepJava/assets/js/29.a39dc7ab.js"><link rel="prefetch" href="/KeepJava/assets/js/3.596aa5f2.js"><link rel="prefetch" href="/KeepJava/assets/js/30.a7ef1e11.js"><link rel="prefetch" href="/KeepJava/assets/js/31.386e222b.js"><link rel="prefetch" href="/KeepJava/assets/js/32.85324444.js"><link rel="prefetch" href="/KeepJava/assets/js/34.e9f2b7c9.js"><link rel="prefetch" href="/KeepJava/assets/js/35.4b7e161f.js"><link rel="prefetch" href="/KeepJava/assets/js/36.39e8eff2.js"><link rel="prefetch" href="/KeepJava/assets/js/37.90259285.js"><link rel="prefetch" href="/KeepJava/assets/js/38.d838dba8.js"><link rel="prefetch" href="/KeepJava/assets/js/39.aab402f0.js"><link rel="prefetch" href="/KeepJava/assets/js/4.a6f55f5d.js"><link rel="prefetch" href="/KeepJava/assets/js/40.1e1951fb.js"><link rel="prefetch" href="/KeepJava/assets/js/41.b994974d.js"><link rel="prefetch" href="/KeepJava/assets/js/42.77236de4.js"><link rel="prefetch" href="/KeepJava/assets/js/43.f1cd7a56.js"><link rel="prefetch" href="/KeepJava/assets/js/44.b9cf68c3.js"><link rel="prefetch" href="/KeepJava/assets/js/45.d949d581.js"><link rel="prefetch" href="/KeepJava/assets/js/46.3306095e.js"><link rel="prefetch" href="/KeepJava/assets/js/47.1c08e86c.js"><link rel="prefetch" href="/KeepJava/assets/js/48.8c0802c7.js"><link rel="prefetch" href="/KeepJava/assets/js/49.b513c38f.js"><link rel="prefetch" href="/KeepJava/assets/js/5.be33ac2d.js"><link rel="prefetch" href="/KeepJava/assets/js/50.a91e4a91.js"><link rel="prefetch" href="/KeepJava/assets/js/51.94807067.js"><link rel="prefetch" href="/KeepJava/assets/js/52.55860f57.js"><link rel="prefetch" href="/KeepJava/assets/js/53.65662d2d.js"><link rel="prefetch" href="/KeepJava/assets/js/6.c9a4e2e1.js"><link rel="prefetch" href="/KeepJava/assets/js/7.6d22e957.js"><link rel="prefetch" href="/KeepJava/assets/js/8.4b0668c3.js"><link rel="prefetch" href="/KeepJava/assets/js/9.c098ded9.js">
    <link rel="stylesheet" href="/KeepJava/assets/css/0.styles.0321c629.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/KeepJava/" class="home-link router-link-active"><img src="/KeepJava/assets/logo/java.svg" alt="KeepJava" class="logo"> <span class="site-name can-hide">KeepJava</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/KeepJava/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java SE" class="dropdown-title"><span class="title">Java SE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java SE" class="mobile-dropdown-title"><span class="title">Java SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/introduction/" class="nav-link">
  Java è¯­è¨€åŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/version/" class="nav-link">
  Java å‘å±•ç®€å²
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/object/" class="nav-link">
  é¢å‘å¯¹è±¡ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/reflection/" class="nav-link">
  Java åå°„
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/annotation/" class="nav-link">
  Java æ³¨è§£
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/exceptions/" class="nav-link">
  Java å¼‚å¸¸
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/generics/" class="nav-link">
  Java æ³›å‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/collection/" class="nav-link">
  Java é›†åˆ
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/io/" class="nav-link router-link-active">
  Java IO
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/concurrency/" class="nav-link">
  Java å¹¶å‘ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/skill/" class="nav-link">
  Java é¢å¤–æŠ€èƒ½
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java EE" class="dropdown-title"><span class="title">Java EE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java EE" class="mobile-dropdown-title"><span class="title">Java EE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring Boot
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring MVC
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          éå…³ç³»å‹ (NoSQL)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/db/mongo/" class="nav-link">
  MongoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  åˆ†å¸ƒå¼
</a></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  ä¸­é—´ä»¶
</a></div><div class="nav-item"><a href="/KeepJava/solution/" class="nav-link">
  è§£å†³æ–¹æ¡ˆ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="mobile-dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/idea/patterns/" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><a href="/KeepJava/tools/" class="nav-link">
  å·¥å…·|æŠ€èƒ½
</a></div> <a href="https://github.com/pycrab" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/KeepJava/guide/" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java SE" class="dropdown-title"><span class="title">Java SE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java SE" class="mobile-dropdown-title"><span class="title">Java SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/introduction/" class="nav-link">
  Java è¯­è¨€åŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/version/" class="nav-link">
  Java å‘å±•ç®€å²
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/object/" class="nav-link">
  é¢å‘å¯¹è±¡ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/reflection/" class="nav-link">
  Java åå°„
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/annotation/" class="nav-link">
  Java æ³¨è§£
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/exceptions/" class="nav-link">
  Java å¼‚å¸¸
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/generics/" class="nav-link">
  Java æ³›å‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/collection/" class="nav-link">
  Java é›†åˆ
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/io/" class="nav-link router-link-active">
  Java IO
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/concurrency/" class="nav-link">
  Java å¹¶å‘ç¼–ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/KeepJava/jdk/skill/" class="nav-link">
  Java é¢å¤–æŠ€èƒ½
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java EE" class="dropdown-title"><span class="title">Java EE</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java EE" class="mobile-dropdown-title"><span class="title">Java EE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring Boot
</a></li><li class="dropdown-subitem"><a href="/KeepJava/" class="nav-link">
  Spring MVC
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ•°æ®åº“" class="mobile-dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          éå…³ç³»å‹ (NoSQL)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/KeepJava/db/mongo/" class="nav-link">
  MongoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  åˆ†å¸ƒå¼
</a></div><div class="nav-item"><a href="/KeepJava/" class="nav-link">
  ä¸­é—´ä»¶
</a></div><div class="nav-item"><a href="/KeepJava/solution/" class="nav-link">
  è§£å†³æ–¹æ¡ˆ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ€æƒ³|æ¦‚å¿µ" class="mobile-dropdown-title"><span class="title">æ€æƒ³|æ¦‚å¿µ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/KeepJava/idea/patterns/" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><a href="/KeepJava/tools/" class="nav-link">
  å·¥å…·|æŠ€èƒ½
</a></div> <a href="https://github.com/pycrab" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java ä¼ ç»Ÿ IO ç±»åº“</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/KeepJava/jdk/io/io-streams.html#æµ" class="sidebar-link">æµ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/KeepJava/jdk/io/io-streams.html#æµçš„æ•°æ®ç±»å‹" class="sidebar-link">æµçš„æ•°æ®ç±»å‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#å­—èŠ‚æµ" class="sidebar-link">å­—èŠ‚æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#å­—ç¬¦æµ" class="sidebar-link">å­—ç¬¦æµ</a></li></ul></li><li><a href="/KeepJava/jdk/io/io-streams.html#æµçš„åˆ†ç±»" class="sidebar-link">æµçš„åˆ†ç±»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#èŠ‚ç‚¹æµ" class="sidebar-link">èŠ‚ç‚¹æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#å†…å­˜æµ" class="sidebar-link" style="padding-left:3rem;">å†…å­˜æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#æ–‡ä»¶æµ" class="sidebar-link" style="padding-left:3rem;">æ–‡ä»¶æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#ç½‘ç»œæµ" class="sidebar-link" style="padding-left:3rem;">ç½‘ç»œæµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#ç®¡é“æµ" class="sidebar-link" style="padding-left:3rem;">ç®¡é“æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#è£…é¥°æµ" class="sidebar-link">è£…é¥°æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#ç¼“å†²æµ" class="sidebar-link" style="padding-left:3rem;">ç¼“å†²æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#æ•°æ®æµ" class="sidebar-link" style="padding-left:3rem;">æ•°æ®æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#æ ¼å¼åŒ–æµ" class="sidebar-link" style="padding-left:3rem;">æ ¼å¼åŒ–æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#å›è¯»æµ" class="sidebar-link" style="padding-left:3rem;">å›è¯»æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#é€‚é…æµ" class="sidebar-link">é€‚é…æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#è½¬æ¢æµ" class="sidebar-link" style="padding-left:3rem;">è½¬æ¢æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#zip-æµ" class="sidebar-link" style="padding-left:3rem;">Zip æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#å¯¹è±¡æµ" class="sidebar-link" style="padding-left:3rem;">å¯¹è±¡æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#é¡ºåºè¾“å…¥æµ" class="sidebar-link" style="padding-left:3rem;">é¡ºåºè¾“å…¥æµ</a></li><li class="sidebar-sub-header"><a href="/KeepJava/jdk/io/io-streams.html#æ ‡å‡†æµå’Œæ§åˆ¶å°" class="sidebar-link">æ ‡å‡†æµå’Œæ§åˆ¶å°</a></li></ul></li><li><a href="/KeepJava/jdk/io/io-streams.html#æµçš„å…³é—­" class="sidebar-link">æµçš„å…³é—­</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="æµ"><a href="#æµ" class="header-anchor">ğŸ‹</a> æµ</h2> <p>ä¼ ç»Ÿ IO ä¸­ä½¿ç”¨æµæ¥ä¼ é€’ã€æ“çºµã€è½¬æ¢æ•°æ®ï¼Œæµå°±æ˜¯ç®€å•å­—èŠ‚ã€åŸå§‹æ•°æ®ç±»å‹ã€æœ¬åœ°åŒ–å­—ç¬¦æˆ–è€…å¯¹è±¡ç»„æˆçš„æ•°æ®åºåˆ—ï¼Œæµåªæ”¯æŒå•å‘ä¼ è¾“ã€‚</p> <p>ä¸€æ¬¡ IO æµå°±æ˜¯æ•°æ®ä»ä¸€ä¸ªæºåˆ°ä¸€ä¸ªç›®çš„åœ°çš„è¿‡ç¨‹ï¼Œå®ƒå¯èƒ½å­˜åœ¨ç£ç›˜æ–‡ä»¶ã€å¤–å›´è®¾å¤‡ï¼ˆé”®ç›˜ç­‰ï¼‰ã€å…¶å®ƒç¨‹åºï¼ˆé€šè¿‡ç½‘ç»œï¼‰æˆ–è€…å†…å­˜åºåˆ—ä¹‹é—´ã€‚å…¶ä¸­ï¼Œå‘å†…å­˜å†™å…¥çš„æµç§°ä¸º<strong>è¾“å…¥æµ</strong>ï¼Œä»å†…å­˜ä¸­è¾“å‡ºçš„æµç§°ä¸º<strong>è¾“å‡ºæµ</strong>ã€‚</p> <h2 id="æµçš„æ•°æ®ç±»å‹"><a href="#æµçš„æ•°æ®ç±»å‹" class="header-anchor">ğŸ‹</a> æµçš„æ•°æ®ç±»å‹</h2> <p>Java åœ¨å†…å­˜ä¸­æ˜¯ä»¥<strong>å­—èŠ‚</strong>ä¸ºå­˜å‚¨å•ä½çš„ï¼Œè¯»å†™æ•°æ®ä¹Ÿéƒ½æ˜¯æŒ‰å­—èŠ‚ä¸€ä¸ªä¸ªé¡ºåºè¯»å†™ï¼Œæ‰€ä»¥æœ€åŸºæœ¬çš„æµå°±æ˜¯å­—èŠ‚æµï¼Œæ‰€æœ‰ä¸å†…å­˜çš„æ“ä½œæœ€åéƒ½ä¼šè½¬æ¢ä¸ºå­—èŠ‚æµã€‚</p> <p>java.io åŒ…ä¸­ä¸»è¦æœ‰å››ä¸ªæŠ½è±¡åŸºç±»ï¼Œå®ƒå®šä¹‰äº†ä¸¤ç§æµæ•°æ®ä¼ è¾“æ ¼å¼ï¼šä»¥å­—èŠ‚ä¸ºå•ä½çš„å­—èŠ‚æµå’Œä»¥å­—ç¬¦ä¸ºå•ä½çš„å­—ç¬¦æµã€‚å­—èŠ‚æµä¸»è¦ç”¨äºå¤„ç†åŸå§‹æ•°æ®ï¼Œæ¯”å¦‚å›¾åƒï¼Œè¦å¤„ç†æ–‡æ¡£ç­‰å­—ç¬¦ç±»å‹è¦è€ƒè™‘ä½¿ç”¨å­—ç¬¦æµã€‚</p> <p>æˆ‘ä»¬çŸ¥é“ï¼ŒæŠ½è±¡åŸºç±»åªèƒ½è¢«ç»§æ‰¿ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡ã€‚å­—èŠ‚æµå’Œå­—ç¬¦æµçš„ç»§æ‰¿ç±»å›¾å¦‚ä¸‹ï¼š</p> <p><img src="https://pycrab.github.io/KeepJava/assets/media/jdk-io-streams-bytes.png" alt="å­—èŠ‚æµéƒ¨åˆ†ç»§æ‰¿ç±»å›¾.png"></p> <p><img src="https://pycrab.github.io/KeepJava/assets/media/jdk-io-streams-characters.png" alt="å­—ç¬¦æµéƒ¨åˆ†ç»§æ‰¿ç±»å›¾.png"></p> <h3 id="å­—èŠ‚æµ"><a href="#å­—èŠ‚æµ" class="header-anchor">ğŸ‹</a> å­—èŠ‚æµ</h3> <p>å­—èŠ‚æµæä¾›çš„å¸¸ç”¨æŠ½è±¡æ–¹æ³•å¦‚ä¸‹ï¼š</p> <ul><li><p>è¾“å…¥æµ</p> <ul><li>read() æ–¹æ³•ï¼Œæ¯æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚å¹¶ä»¥ int çš„å½¢å¼è¿”å›å€¼ï¼ˆä½å…«ä½ï¼‰ï¼Œå¦‚æœæ²¡æœ‰å­—èŠ‚å¯è¯»åˆ™è¿”å› -1</li> <li>read(byte[]) æ–¹æ³•ï¼Œæ¯æ¬¡è¯»å–æŒ‡å®šä¸ªæ•°çš„å­—èŠ‚å¹¶æ”¾åˆ°ç¼“å­˜æ•°ç»„ä¸­ï¼Œè¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ï¼Œæ²¡æœ‰å­—èŠ‚å¯è¯»è¿”å› -1</li> <li>close() æ–¹æ³•ï¼Œå…³é—­è¾“å…¥æµï¼Œå¹¶é‡Šæ”¾è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æº</li> <li>transferTo(OutputStream out) æ–¹æ³•ï¼Œå°†æ­¤è¾“å…¥æµå†™å…¥åˆ°æŒ‡å®šè¾“å‡ºæµï¼Œé»˜è®¤ä½¿ç”¨ç¼“å†²åŒºå¤§å°ä¸º 8M</li></ul></li> <li><p>è¾“å‡ºæµ</p> <ul><li>write(int b) æ–¹æ³•ï¼Œæ¯æ¬¡è¾“å‡ºä¸€ä¸ªå­—èŠ‚</li> <li>flush() æ–¹æ³•ï¼Œå¼ºåˆ¶å°†ç¼“å†²åŒºçš„æ•°æ®è¾“å‡º</li> <li>close() æ–¹æ³•ï¼Œå…³é—­è¾“å‡ºæµï¼Œå¹¶é‡Šæ”¾è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æº</li></ul></li></ul> <h3 id="å­—ç¬¦æµ"><a href="#å­—ç¬¦æµ" class="header-anchor">ğŸ‹</a> å­—ç¬¦æµ</h3> <p>å­—ç¬¦æµæä¾›çš„æŠ½è±¡æ–¹æ³•å’Œå­—èŠ‚æµç±»ä¼¼ã€‚</p> <h2 id="æµçš„åˆ†ç±»"><a href="#æµçš„åˆ†ç±»" class="header-anchor">ğŸ‹</a> æµçš„åˆ†ç±»</h2> <p>ç»§æ‰¿è‡ªå­—èŠ‚æµç±»å’Œå­—ç¬¦æµç±»çš„ç±»åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼Œè¿™é‡Œåˆ—å‡ºä¸€äº›å¸¸è§çš„ï¼š</p> <h3 id="èŠ‚ç‚¹æµ"><a href="#èŠ‚ç‚¹æµ" class="header-anchor">ğŸ‹</a> èŠ‚ç‚¹æµ</h3> <p>èŠ‚ç‚¹æµæ˜¯çœŸæ­£å¤„ç†æ•°æ®çš„æµï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p> <h4 id="å†…å­˜æµ"><a href="#å†…å­˜æµ" class="header-anchor">ğŸ‹</a> å†…å­˜æµ</h4> <p>åœ¨å†…å­˜ä¸­æ“ä½œï¼Œä¸éœ€è¦ close() å…³é—­çš„æµã€‚</p> <ul><li><p>å­—ç¬¦ä¸²æµ</p> <p>StringReader ç±»è¯»å–å­—ç¬¦ä¸²ï¼ŒStringWriter ç±»è¾“å‡ºå­—ç¬¦ä¸²ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">StringReader</span> stringReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span><span class="token string">&quot;Hello IO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">StringWriter</span> stringWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> read<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>read <span class="token operator">=</span> stringReader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>read<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringWriter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>æ•°ç»„ç¼“å†²æµ</p> <p>å†…ç½®ç¼“å†²æ•°ç»„çš„æµï¼ŒåŒ…å« ByteArrayInputStream ç±»ã€ByteArrayOutputStream ç±»ã€CharArrayReader ç±»ã€CharArrayWriter ç±»ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ByteArrayInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">'H'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token string">'O'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">ByteArrayOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">CharArrayReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">'ä½ '</span><span class="token punctuation">,</span> <span class="token string">'å¥½'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">CharArrayWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inputStream<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>writer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>writer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul> <h4 id="æ–‡ä»¶æµ"><a href="#æ–‡ä»¶æµ" class="header-anchor">ğŸ‹</a> æ–‡ä»¶æµ</h4> <p>æ–‡ä»¶æµç”¨äºè¯»å†™ç£ç›˜æ–‡ä»¶ï¼Œä½¿ç”¨å®Œæµéœ€è¦ close() å…³é—­ã€‚</p> <ul><li>è¯»å–ç£ç›˜æ–‡ä»¶ï¼Œæ”¯æŒæŒ‡å®šå­—ç¬¦é›†
<ul><li>FileInputStream ç±»å’Œ FileReader ç±»</li></ul></li> <li>å†™å…¥ç£ç›˜æ–‡ä»¶ï¼Œæ”¯æŒæŒ‡å®šå­—ç¬¦é›†ï¼Œå’Œé€‰æ‹©æ˜¯å¦è¿½åŠ åœ¨æœ«å°¾ï¼ˆé»˜è®¤è¦†ç›–æ–‡ä»¶ï¼‰
<ul><li>FileOutputStream ç±»å’Œ FileWriter ç±»</li></ul></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">FileWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">FileReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">CharArrayWriter</span> charArrayWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;This is the first line.&quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">lineSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    writer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™æ˜¯ç¬¬äºŒè¡Œã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ³¨æ„ä¸€å®šè¦å¼ºåˆ¶è¾“å‡ºç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¦åˆ™ä¸ä¼šç«‹é©¬çœ‹åˆ°</span>

    reader<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>charArrayWriter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>charArrayWriter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="ç½‘ç»œæµ"><a href="#ç½‘ç»œæµ" class="header-anchor">ğŸ‹</a> ç½‘ç»œæµ</h4> <p>ç½‘ç»œæµç”¨äºç½‘ç»œé€šä¿¡ã€‚</p> <h4 id="ç®¡é“æµ"><a href="#ç®¡é“æµ" class="header-anchor">ğŸ‹</a> ç®¡é“æµ</h4> <p>PipedOutputStream ç±»ã€PipedInputStream ç±»å’Œ PipedWriter ç±»ã€PipedReader ç±»æä¾›çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œè¾“å…¥æµå’Œè¾“å‡ºæµä¸€å®šæˆå¯¹å‡ºç°ï¼Œå¹¶ä¸”éœ€è¦ connect() è¿æ¥ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadSender</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PipedOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ThreadSender</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PipedOutputStream</span> <span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> outputStream<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadReceiver</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PipedInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> read <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>read<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>read<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PipedInputStream</span> <span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> inputStream<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">final</span> <span class="token class-name">ThreadSender</span> sender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadSender</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">ThreadReceiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    sender<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>sender<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><hr> <h3 id="è£…é¥°æµ"><a href="#è£…é¥°æµ" class="header-anchor">ğŸ‹</a> è£…é¥°æµ</h3> <p>ä½¿ç”¨ <a href="../../idea/patterns/decorator-mode">è£…é¥°å™¨è®¾è®¡æ¨¡å¼</a>ï¼ŒåŒ…è£…èŠ‚ç‚¹æµæ·»åŠ é¢å¤–çš„è¡Œä¸ºï¼Œè¿™äº›æµå¤§éƒ¨åˆ†ç»§æ‰¿è‡ª FilterXXX ç±»ï¼š</p> <h4 id="ç¼“å†²æµ"><a href="#ç¼“å†²æµ" class="header-anchor">ğŸ‹</a> ç¼“å†²æµ</h4> <p>ç¼“å†²æµåŒ…å« BufferedInputStream ç±»ã€BufferedOutputStream ç±»ã€BufferedReader ç±»ã€BufferedWriter ç±»ã€‚</p> <p>åˆ›å»ºç¼“å†²æµæ—¶ä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨ç¼“å†²æ•°ç»„ï¼Œé€šè¿‡æ‰¹é‡æ“ä½œï¼Œå­—èŠ‚æµå¯ä»¥å‡å°‘å¯¹åº•å±‚ç³»ç»Ÿç›´æ¥è°ƒç”¨ï¼Œå­—ç¬¦æµå¯ä»¥å‡å°‘å­—èŠ‚å’Œå­—ç¬¦ä¹‹é—´çš„è½¬æ¢æ•ˆç‡ã€‚</p> <p>å…³é—­ç¼“å†²æµä¼šä½¿ç”¨ CAS æ¸…ç©ºç¼“å†²æ•°ç»„ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">FileWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;This is the first line.&quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">lineSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    writer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™æ˜¯ç¬¬äºŒè¡Œã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> line<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">Flush</p> <p>è¾“å‡ºæµå®ç°äº† flushable æ¥å£ï¼Œç¼“å†²æµé‡å†™äº†å…¶ä¸­çš„ flush() æ–¹æ³•ï¼Œè°ƒç”¨ flush() æ–¹æ³•å¯ä»¥å°†ç¼“å†²åŒºçš„å†…å®¹å†™å…¥åŸºæœ¬æµã€‚</p> <p>ç¼“å†²æµè°ƒç”¨ close() æ–¹æ³•ï¼Œä¼šå…ˆå°è¯•è°ƒç”¨ flush() æ–¹æ³•æ¸…ç©ºç¼“å†²åŒºåå…³é—­æµã€‚</p> <p>å¦‚æœç›®çš„åœ°æ˜¯ç£ç›˜ï¼Œè°ƒç”¨ flush() æ–¹æ³•åªèƒ½ä¿è¯å†™å…¥åŸºæœ¬æµï¼Œä¸ä¿è¯å·²å†™å…¥ç£ç›˜ã€‚</p></div> <h4 id="æ•°æ®æµ"><a href="#æ•°æ®æµ" class="header-anchor">ğŸ‹</a> æ•°æ®æµ</h4> <p>DataInputStream ç±»å’Œ DataOutputStream ç±»æä¾› Java åŸå§‹æ•°æ®ç±»å‹çš„å¤„ç†ï¼Œæ•°æ®æµæ”¯æŒåŸºæœ¬ç±»å‹å’Œ String ç±»å‹çš„æ•°æ®ï¼Œä½¿ç”¨æµ®ç‚¹æ•°è¡¨ç¤ºè´§å¸å€¼ï¼Œä¸æ”¯æŒç²¾ç¡®æµ®ç‚¹å€¼ã€‚ç¨‹åºå‘˜éœ€ä¿è¯å†™å…¥å’Œè¯»å‡ºçš„æ•°æ®ç±»å‹ä¸€è‡´ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">DataOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">DataInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outputStream<span class="token punctuation">.</span><span class="token function">writeBoolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outputStream<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outputStream<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;æ¬§å…‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">.</span><span class="token function">readBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="æ ¼å¼åŒ–æµ"><a href="#æ ¼å¼åŒ–æµ" class="header-anchor">ğŸ‹</a> æ ¼å¼åŒ–æµ</h4> <p>PrintStream ç±»å’Œ PrintWriter ç±»ã€‚é’ˆå¯¹æ ¼å¼åŒ–çš„è¾“å…¥å¯ä»¥é€šè¿‡ Scanner ç±»è¿›è¡ŒåŒ…è£…ï¼Œä»è€Œè¿›è¡Œæ ¼å¼åŒ–æ‰«æã€‚</p> <h4 id="å›è¯»æµ"><a href="#å›è¯»æµ" class="header-anchor">ğŸ‹</a> å›è¯»æµ</h4> <p>PushbackInputStream ç±»å’Œ PushbackReader ç±»ã€‚å¯ä»¥å°†è¯»åˆ°ï¼ˆreadï¼‰çš„æ•°æ®æ”¾åˆ°ç¼“å†²é˜Ÿåˆ—ï¼ˆunreadï¼‰ä¸­é‡æ–°è¯»å–ï¼ˆreadï¼‰ã€‚</p> <h3 id="é€‚é…æµ"><a href="#é€‚é…æµ" class="header-anchor">ğŸ‹</a> é€‚é…æµ</h3> <p>ä½¿ç”¨ <a href="../../idea/patterns/adapter-mode">é€‚é…å™¨è®¾è®¡æ¨¡å¼</a>ï¼Œæ”¹å˜åŸå§‹ç±»çš„è¡Œä¸ºï¼Œè¿™äº›æµæœ‰ï¼š</p> <h4 id="è½¬æ¢æµ"><a href="#è½¬æ¢æµ" class="header-anchor">ğŸ‹</a> è½¬æ¢æµ</h4> <p>æ ¹æ®æŒ‡å®šå­—ç¬¦é›†å°†å­—èŠ‚æµè§£ç ä¸ºå­—ç¬¦æµå’Œå°†å­—ç¬¦æµç¼–ç ä¸ºå­—èŠ‚æµçš„ç±»ï¼šInputStreamReader å’Œ OutputStreamWriterã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">InputStreamReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> read<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>read <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>read<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="zip-æµ"><a href="#zip-æµ" class="header-anchor">ğŸ‹</a> Zip æµ</h4> <p><img src="https://pycrab.github.io/KeepJava/assets/media/jdk-io-streams-zip.png" alt="Zip æµç»§æ‰¿å›¾.png"></p> <p>ä½äº java.util.zip åŒ…ä¸­çš„ ZipInputStream ç±»å’Œ ZipOutputStream ç±»å¯ä»¥æ“ä½œ ZIP æ–‡ä»¶ã€‚ä¸‹é¢æ¼”ç¤ºæ‰“åŒ…ä¸€ä¸ªæ–‡ä»¶ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ZipOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZipOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.zip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// putNextEntry å¼€å¯ä¸€ä¸ªæ–‡ä»¶ç›®å½•ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰</span>
    outputStream<span class="token punctuation">.</span><span class="token function">putNextEntry</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ZipEntry</span><span class="token punctuation">(</span><span class="token string">&quot;txt/test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å†™å…¥æ•°æ®</span>
    outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‰“åŒ…å®Œæˆå…³é—­ç›®å½•</span>
    outputStream<span class="token punctuation">.</span><span class="token function">closeEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="å¯¹è±¡æµ"><a href="#å¯¹è±¡æµ" class="header-anchor">ğŸ‹</a> å¯¹è±¡æµ</h4> <p>ObjectInputStream ç±»å’Œ ObjectOutputStream ç±»æä¾› Java å¯¹è±¡ç±»å‹å’ŒåŸå§‹æ•°æ®ç±»å‹çš„å¤„ç†ï¼Œæ”¯æŒå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p> <p>ObjectOutputStream ç±»é€šè¿‡ writeObject(Object o) æ–¹æ³•è¿›è¡Œåºåˆ—åŒ–å¯¹è±¡ï¼ŒObjectInputStream ç±»é€šè¿‡ readObject() æ–¹æ³•æ¥ååºåˆ—åŒ–å¯¹è±¡ã€‚</p> <blockquote><p>æ¥äº†è§£ä¸€ä¸‹ <a href="../skill/serialization">åºåˆ—åŒ–å’Œååºåˆ—åŒ–</a> çš„çŸ¥è¯†</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ObjectOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;task.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">final</span> <span class="token class-name">ObjectInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;task.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outputStream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token class-name">Task</span> object <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Task</span><span class="token punctuation">)</span> inputStream<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="é¡ºåºè¾“å…¥æµ"><a href="#é¡ºåºè¾“å…¥æµ" class="header-anchor">ğŸ‹</a> é¡ºåºè¾“å…¥æµ</h4> <p>SequenceInputStream ç±»æä¾›æŒ‰é¡ºåºè¯»å–å¤šä¸ªè¾“å…¥æµã€‚</p> <hr> <h3 id="æ ‡å‡†æµå’Œæ§åˆ¶å°"><a href="#æ ‡å‡†æµå’Œæ§åˆ¶å°" class="header-anchor">ğŸ‹</a> æ ‡å‡†æµå’Œæ§åˆ¶å°</h3> <ul><li>æ ‡å‡†è¾“å…¥æµ System.in ï¼ˆInputStreamï¼‰</li> <li>æ ‡å‡†è¾“å‡ºæµ System.out å’Œ System.err ï¼ˆPrintStreamï¼‰</li> <li>æ§åˆ¶å° System.console() ï¼ˆConsoleï¼‰ï¼Œæä¾›çœŸæ­£çš„å­—ç¬¦æµ</li></ul> <h2 id="æµçš„å…³é—­"><a href="#æµçš„å…³é—­" class="header-anchor">ğŸ‹</a> æµçš„å…³é—­</h2> <p>å­—èŠ‚æµï¼ˆInputStreamã€OutputStreamï¼‰å’Œå­—ç¬¦æµï¼ˆReaderã€Writerï¼‰éƒ½å®ç°äº† Closeable æ¥å£ä¸­çš„ close() æ–¹æ³•ã€‚å› ä¸ºåƒåœ¾æ”¶é›†å™¨åªèƒ½å›æ”¶å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œæ— æ³•å›æ”¶æµï¼Œæ‰€ä»¥æ‰“å¼€çš„æµéƒ½éœ€è¦æ‰‹åŠ¨è°ƒç”¨ close() æ–¹æ³•å…³é—­ã€‚</p> <p>é€šå¸¸æˆ‘ä»¬éœ€è¦ä½¿ç”¨ try -catch - finally å—æ¥æ‰“å¼€å’Œå…³é—­æµï¼Œå¹¶æ•è·å·²æ£€æŸ¥çš„å¼‚å¸¸ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> inputStream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>JDK 7 æä¾›çš„ try - with - resources è¯­æ³•ç³–å¯ä»¥çœç•¥ finally å—æ¥è‡ªåŠ¨å…³é—­èµ„æºï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>JDK 9 æ›´æ˜¯ç®€åŒ–äº† try - with - resources æµçš„å£°æ˜ï¼Œå¦‚æœä¸å¯å˜çš„æµåœ¨ try å—å¤–å·²ç»åˆå§‹åŒ–ï¼ŒJDK 9 ä¹‹åå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å†æ¬¡å£°æ˜ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// JDK 9 ä¹‹å‰</span>
<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> inputStream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fileInputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// JDK 9 ä¹‹å</span>
<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">æç¤º</p> <p>Closeable æ¥å£çš„ close() æ–¹æ³•å¯ä»¥æ‰§è¡Œå¤šæ¬¡ï¼Œå¯¹å·²ç»å…³é—­çš„èµ„æºæ˜¯æ²¡æœ‰å½±å“çš„ï¼Œå®ƒæ˜¯å¹‚ç­‰çš„ï¼›è€Œå®ƒçš„çˆ¶ç±» AutoCloseable æ¥å£çš„ close() æ–¹æ³•ä¸æ˜¯å¹‚ç­‰çš„ï¼Œå¤šæ¬¡æ‰§è¡Œå¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨ï¼Œæ‰€ä»¥è¦æ±‚å®ç° AutoCloseable æ¥å£çš„ç±»è‡ªå·±å®ç°å¹‚ç­‰ã€‚</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/pycrab/KeepJava/edit/master/jdk/io/io-streams.md" target="_blank" rel="noopener noreferrer">Edit Me On Github</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020/12/3 ä¸‹åˆ3:48:31</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/KeepJava/jdk/io/" class="prev router-link-active">
        Java IO
      </a></span> <span class="next"><a href="/KeepJava/jdk/io/new-io.html">
        Java New IO ç±»åº“
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/KeepJava/assets/js/app.95e4ac80.js" defer></script><script src="/KeepJava/assets/js/2.73d6ef14.js" defer></script><script src="/KeepJava/assets/js/33.1775ff36.js" defer></script>
  </body>
</html>
