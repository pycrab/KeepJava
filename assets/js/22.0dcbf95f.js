(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{375:function(t,a,s){"use strict";s.r(a);var e=s(25),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å¯å…±äº«çš„ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¯å…±äº«çš„ç±»"}},[t._v("ğŸ‹")]),t._v(" å¯å…±äº«çš„ç±»")]),t._v(" "),s("p",[t._v("æœ‰äº›ç±»æ˜¯å¯ä»¥å…±äº«è®¿é—®å¹¶ä¸”çº¿ç¨‹å®‰å…¨çš„ï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ— çŠ¶æ€çš„ç±»")]),t._v(" "),s("p",[t._v("å¦‚æœä¸€ä¸ªç±»åªæä¾›æ–¹æ³•ï¼Œæ²¡æœ‰å±æ€§ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ä¸å¯å˜ç±»")]),t._v(" "),s("p",[t._v("å¦‚æœå¯¹è±¡çš„å±æ€§æ˜¯ä¸å¯å˜çš„ï¼Œå¹¶ä¸”ä¸æä¾›ä¿®æ”¹æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒæ˜¯å®‰å…¨çš„ã€‚å¦‚æœè¦å£°æ˜ä¸€ä¸ªå®Œå…¨ä¸å¯å˜çš„ç±»ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹è¦ç´ ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å£°æ˜ final ç±»å‹çš„ç±»ï¼Œé˜²æ­¢å­—ç±»è¦†ç›–æ–¹æ³•")]),t._v(" "),s("li",[t._v("å£°æ˜ç§æœ‰çš„ä¸å¯å˜å±æ€§ï¼Œå¹¶ä¸”ä¸æä¾› set æ–¹æ³•ä¿®æ”¹å±æ€§çš„å€¼")]),t._v(" "),s("li",[t._v("å¯¹å¼•ç”¨å¯¹è±¡çš„å±æ€§ï¼Œä¸æä¾›ä¿®æ”¹æ–¹æ³•ï¼Œå¹¶ä¸”ä¸æš´éœ²å¼•ç”¨å¯¹è±¡ï¼ˆå¯ä»¥é€šè¿‡æä¾›å¼•ç”¨å¯¹è±¡çš„å‰¯æœ¬ç»™å¤–éƒ¨è®¿é—®ï¼‰")]),t._v(" "),s("li",[t._v("ç”šè‡³æ˜¯å£°æ˜ç§æœ‰æ„é€ å™¨ï¼Œä»å·¥å‚åˆ›å»ºå®ä¾‹")])]),t._v(" "),s("p",[t._v("ä¼—æ‰€å‘¨çŸ¥ï¼ŒEnum æšä¸¾ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¸å¯å˜ç±»ï¼ŒJDK 9 æ–°å¢çš„ VarHandles ç±»ä¹Ÿæ˜¯ä¸å¯å˜çš„ç±»ã€‚")])])]),t._v(" "),s("h2",{attrs:{id:"åŸå­ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸå­ç±»"}},[t._v("ğŸ‹")]),t._v(" åŸå­ç±»")]),t._v(" "),s("p",[t._v("åŸå­æ“ä½œæ˜¯ä¸€æ¬¡æœ‰æ•ˆåœ°åŒæ—¶å‘ç”Ÿçš„åŠ¨ä½œã€‚åŸå­æ“ä½œä¸èƒ½åœåœ¨ä¸­é—´ï¼šå®ƒè¦ä¹ˆå®Œå…¨å‘ç”Ÿï¼Œè¦ä¹ˆæ ¹æœ¬ä¸å‘ç”Ÿã€‚ç›´åˆ°åŠ¨ä½œå®Œæˆï¼ŒåŸå­åŠ¨ä½œçš„ç»“æœæ‰å¯è§ã€‚åŸå­åŠ¨ä½œä¸èƒ½äº¤æ›¿ï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒçº¿ç¨‹å¹²æ‰°ï¼ˆä½†æ˜¯ä¸èƒ½é¿å…å†…å­˜ä¸€è‡´æ€§é”™è¯¯ï¼‰ã€‚")]),t._v(" "),s("p",[t._v("JDK 5 æ–°å¢äº†ä¸€äº›åŸå­æ“ä½œçš„å°è£…ç±»åœ¨ java.util.concurrent.atomic åŒ…ä¸­ï¼Œæ¯”å¦‚ AtomicInteger ç±»æä¾›äº† int ç±»å‹çš„åŸå­æ“ä½œï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("getAndIncrement()")]),t._v(" è‡ªå¢ 1")]),t._v(" "),s("li",[s("code",[t._v("getAndDecrement()")]),t._v(" è‡ªå‡ 1")]),t._v(" "),s("li",[s("code",[t._v("intValue()")]),t._v(" è·å– int å€¼ï¼ŒåŸå­ç±»å‹ä¸èƒ½æ›¿ä»£ int ç±»å‹ï¼Œä½†æ˜¯æä¾›äº†å’Œ int ç±»å‹çš„è½¬æ¢")])]),t._v(" "),s("p",[t._v("åŸå­ç±»æ›´é€‚ç”¨äºå®ç°çº¿ç¨‹å®‰å…¨çš„è®¡æ•°å™¨ã€ç´¯åŠ å™¨ç­‰ã€‚")]),t._v(" "),s("h2",{attrs:{id:"å¹¶å‘é›†åˆç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘é›†åˆç±»"}},[t._v("ğŸ‹")]),t._v(" å¹¶å‘é›†åˆç±»")]),t._v(" "),s("p",[t._v("JDK 5 ä¹‹å‰ java.util åŒ…ä¸­çš„å¤§éƒ¨åˆ†é›†åˆç±»éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼ŒJDK 5 åœ¨ java.util.concurrent åŒ…ä¸­æ–°å¢äº†çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼Œå®ƒä»¬çš„ç”¨æ³•ä¸éçº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ç›¸åŒï¼Œä½†æ˜¯ä¿è¯äº†çº¿ç¨‹å®‰å…¨åŠåŸå­æ“ä½œã€‚")]),t._v(" "),s("p",[t._v("æ‰€æœ‰è¿™äº›é›†åˆéƒ½é€šè¿‡åœ¨å°†å¯¹è±¡æ·»åŠ åˆ°é›†åˆçš„æ“ä½œä¸è®¿é—®æˆ–åˆ é™¤è¯¥å¯¹è±¡çš„åç»­æ“ä½œä¹‹é—´å®šä¹‰ happens - before å…³ç³»æ¥é¿å…å†…å­˜ä¸€è‡´æ€§é”™è¯¯ã€‚å¯¹ç…§å…³ç³»å¦‚ä¸‹ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("åŸå§‹é›†åˆç±»")]),t._v(" "),s("th",[t._v("å¹¶å‘å®‰å…¨é›†åˆç±»")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ArrayList")]),t._v(" "),s("td",[t._v("CopyOnWriteArrayList")])]),t._v(" "),s("tr",[s("td",[t._v("Hashtable")]),t._v(" "),s("td",[t._v("ConcurrentHashMap")])]),t._v(" "),s("tr",[s("td",[t._v("Set")]),t._v(" "),s("td",[t._v("CopyOnWriteArraySet")])])])]),t._v(" "),s("p",[t._v("å¹¶å‘å®‰å…¨é›†åˆç±»å‚è€ƒ "),s("RouterLink",{attrs:{to:"/jdk/collection/"}},[t._v("Java é›†åˆ - å¹¶å‘å®‰å…¨")])],1),t._v(" "),s("h2",{attrs:{id:"å¹¶å‘éšæœºæ•°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘éšæœºæ•°"}},[t._v("ğŸ‹")]),t._v(" å¹¶å‘éšæœºæ•°")]),t._v(" "),s("p",[t._v("JDK 7 æ–°å¢äº† ThreadLocalRandom ç±»æé«˜å¹¶å‘è·å–éšæœºæ•°çš„æ€§èƒ½ã€‚ä½¿ç”¨æ–¹å¼ä¸º "),s("code",[t._v("int r = ThreadLocalRandom.current().nextInt(0, 100);")])]),t._v(" "),s("h2",{attrs:{id:"çº¿ç¨‹å±€éƒ¨å˜é‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çº¿ç¨‹å±€éƒ¨å˜é‡"}},[t._v("ğŸ‹")]),t._v(" çº¿ç¨‹å±€éƒ¨å˜é‡")]),t._v(" "),s("p",[t._v("ThreadLocal ç±»ç”¨æ¥ä¿å­˜çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œç±»å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ ThreadLocalMap å“ˆå¸Œæ˜ å°„ï¼Œé”®å€¼å¯¹ç»§æ‰¿ WeakReference ï¼Œä½¿ç”¨ ThreadLocal å¯¹è±¡ä½œä¸º keyï¼Œå€¼ä½œä¸º valueï¼Œå½“ "),s("code",[t._v("get()")]),t._v(" æ–¹æ³•è¿”å›ç©ºæ—¶ä¼šè‡ªåŠ¨åˆ é™¤å“ˆå¸Œè¡¨ä¸­çš„æ¡ç›®ã€‚")]),t._v(" "),s("p",[t._v("å®ƒä½œä¸ºä¸çº¿ç¨‹ç›¸å…³çš„ç±»ç§æœ‰é™æ€å±æ€§ï¼Œæä¾›äº†ä¸‰ä¸ªæ–¹æ³•ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("get()")]),t._v("ï¼Œè·å–å€¼")]),t._v(" "),s("li",[s("code",[t._v("set(T)")]),t._v("ï¼Œè®¾ç½®å€¼")]),t._v(" "),s("li",[s("code",[t._v("remove()")]),t._v("ï¼Œæ¸…é™¤å€¼")])]),t._v(" "),s("p",[t._v("ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocal")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" local "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocal")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// JDK 8 æ–°å¢ lambada è¡¨è¾¾å¼åˆå§‹åŒ–è¯­æ³•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocal")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" local "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withInitial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"volatile-å…³é”®å­—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatile-å…³é”®å­—"}},[t._v("ğŸ‹")]),t._v(" volatile å…³é”®å­—")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ "),s("code",[t._v("volatile")]),t._v(" å£°æ˜å˜é‡ï¼Œé™ä½äº†å†…å­˜ä¸€è‡´æ€§é”™è¯¯çš„é£é™©ï¼Œå› ä¸ºå¯¹"),s("code",[t._v("volatile")]),t._v("å˜é‡çš„ä»»ä½•å†™å…¥éƒ½ä¼šä¸è¯¥å˜é‡çš„åç»­è¯»å–å»ºç«‹å…ˆå‘ç”Ÿåå…³ç³»ã€‚è¿™æ„å‘³ç€å¯¹"),s("code",[t._v("volatile")]),t._v("å˜é‡çš„æ›´æ”¹å§‹ç»ˆå¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚")]),t._v(" "),s("h2",{attrs:{id:"jmm-å†…å­˜æ¨¡å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jmm-å†…å­˜æ¨¡å‹"}},[t._v("ğŸ‹")]),t._v(" JMM å†…å­˜æ¨¡å‹")]),t._v(" "),s("p",[t._v("TODO")])])}),[],!1,null,null,null);a.default=n.exports}}]);