(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{392:function(t,v,_){"use strict";_.r(v);var e=_(25),r=Object(e.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"为什么要编码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#为什么要编码"}},[t._v("🎋")]),t._v(" 为什么要编码")]),t._v(" "),_("p",[t._v("计算机被设计为把字节 byte 作为最小的存储单位，即 8 个 bit，那么一个字节最多能表示 2 的 8 次方即 256 个字符。")]),t._v(" "),_("p",[t._v("世界上有各种各样的语言，256 个字符肯定不能代表所有的字符，那么就需要一种规范来表示不同的字符，这样就产生了"),_("strong",[t._v("从字符 char 到字节 byte")]),t._v(" "),_("badge",[t._v("编码")]),t._v(" 和"),_("strong",[t._v("从字节 byte 到字符 char")]),t._v(" "),_("badge",[t._v("解码")]),t._v(" 的转换，这就是编码和解码。")],1),t._v(" "),_("p",[t._v("编码规范（或者叫编码格式）大致有以下几种：")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("ASCII 编码")]),t._v("，共有 128 个字符")]),t._v(" "),_("li",[_("strong",[t._v("ISO-8859-1")]),t._v("，共有 256 个字符")]),t._v(" "),_("li",[_("strong",[t._v("GB2312")]),t._v("，共有 682 个符号，6763 个汉字")]),t._v(" "),_("li",[_("strong",[t._v("GBK")]),t._v("，扩展了 GB2312，能表示 21003 个汉字。兼容 GB2312")]),t._v(" "),_("li",[_("strong",[t._v("GB18030")]),t._v("，国标，兼容 GB2312")]),t._v(" "),_("li",[_("strong",[t._v("Unicode 统一码")]),t._v("，包含世界所有语言，主要有以下两种编码：\n"),_("ul",[_("li",[_("strong",[t._v("UTF-16")]),t._v("，固定两个字节表示一个字符，不适用于网络传输，容易丢失。（Java 在内存中默认使用 UTF-16 编码）")]),t._v(" "),_("li",[_("strong",[t._v("UTF-8")]),t._v("，采用变长字节来表示不同字符，可以减少网络带宽和存储空间")])])])]),t._v(" "),_("p",[t._v("编码并不是一种保证安全的技术，它只是为了使数据保持一致，对不同语言的人都是可视的。如果使用不当，那么就会产生"),_("strong",[t._v("乱码")]),t._v("，这是我们不想见到的。")]),t._v(" "),_("p",[t._v("为了统一，我们建议使用 Unicode 统一编码；而对于使用到的一些旧的基于非统一编码的技术，我们要了解其默认编码，并通过配置或者程序来避免编码不一致产生的乱码。")]),t._v(" "),_("h2",{attrs:{id:"编码场景及应用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#编码场景及应用"}},[t._v("🎋")]),t._v(" 编码场景及应用")]),t._v(" "),_("p",[t._v("根据编码和解码的定义，存在字符和字节之间进行转换的场景主要有以下几种：")]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("Java IO 中字节流（Stream）和字符流 （Reader / Writer）之间的转换")])]),t._v(" "),_("p",[t._v("主要由 StreamEncoder 类和 StreamDecoder 类进行编码和解码。")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("Java 字符串（String）和字节（Byte）的转换")])]),t._v(" "),_("p",[t._v("主要由 StringCoding 类进行编码和解码。")])])]),t._v(" "),_("h2",{attrs:{id:"一次-http-请求中的编解码配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一次-http-请求中的编解码配置"}},[t._v("🎋")]),t._v(" 一次 HTTP 请求中的编解码配置")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("对客户端请求编解码")]),t._v(" "),_("ul",[_("li",[t._v("设置 Ajax 请求 Content Type 编码为 charset=UTF-8")]),t._v(" "),_("li",[t._v("使用 encodeURIComponent() 对 URL 编码")])])]),t._v(" "),_("li",[_("strong",[t._v("服务端接收请求编解码")]),t._v(" "),_("ul",[_("li",[t._v("Tomcat 服务器设置 "),_("code",[t._v('<Connector URIEncoding="UTF-8">')]),t._v(" 解码 URI")]),t._v(" "),_("li",[t._v("Tomcat 服务器设置 "),_("code",[t._v('<connector URIEncoding="UTF-8" useBodyEncodingForURI="true">')]),t._v(" 解码 Query String 参数")]),t._v(" "),_("li",[t._v("设置 "),_("code",[t._v("request.setCharacterEncoding(charset)")]),t._v(" 解码 POST 表单")]),t._v(" "),_("li",[t._v("使用 URLEncoder 类对请求头信息（HTTP Header 、Cookies）编解码")])])]),t._v(" "),_("li",[_("strong",[t._v("服务端响应请求编解码")]),t._v(" "),_("ul",[_("li",[t._v("设置 "),_("code",[t._v("response.setCharacterEncoding(charset)")]),t._v(" 编码返回 BODY")])])])]),t._v(" "),_("hr"),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("参考文献")]),t._v(" "),_("ul",[_("li",[t._v("《深入分析 Java Web 技术内幕》（修订版） 许令波 著 电子工业出版社")]),t._v(" "),_("li",[_("a",{attrs:{href:"https://www.liaoxuefeng.com/wiki/1252599548343744/1304227703947297",target:"_blank",rel:"noopener noreferrer"}},[t._v("编码算法"),_("OutboundLink")],1),t._v(" 廖雪峰的博客")]),t._v(" "),_("li",[_("a",{attrs:{href:"http://blog.xiayf.cn/2016/01/24/base64-encoding/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Base64编码原理与应用"),_("OutboundLink")],1),t._v(" 有趣的技术")])])])])}),[],!1,null,null,null);v.default=r.exports}}]);